{"version":3,"sources":["components/colorTheme.tsx","components/customTheme.tsx","pages/plain/home/About.tsx","components/InteractiveStack.tsx","components/RoutedAnchor.tsx","pages/plain/home/Modal.tsx","pages/plain/home/Privacy.tsx","components/ModalSelector.tsx","Routes.ts","store/store.ts","components/NavMenu.tsx","components/PageContainer.tsx","components/ProgressIndicator.tsx","pages/chapters/ChapterButtons.tsx","components/playable/PlayableSettingsMenu.tsx","components/playable/PlayableControls.tsx","components/playable/Playable.tsx","720p.mp4","pages/chapters/Chapter1.tsx","components/playable/PlayableVideo.tsx","1920x1080.png","pages/chapters/Chapter2.tsx","pages/chapters/Chapter3.tsx","pages/chapters/Chapter4.tsx","pages/chapters/Chapter5.tsx","pages/chapters/ChapterFinishCountDown.tsx","pages/chapters/Chapters.tsx","pages/covers/CoverButtons.tsx","pages/covers/Cover1.tsx","pages/plain/home/CustomButton.tsx","components/WebcamPermissions.tsx","hooks/useAnimationFrame.tsx","pages/covers/part-groups.tsx","pages/covers/FaceTracker.tsx","pages/covers/VideoDetector.tsx","hooks/useForwardedRef.tsx","pages/covers/Cover2.tsx","pages/covers/Cover3.tsx","pages/covers/Cover4.tsx","pages/covers/Cover5.tsx","pages/covers/Covers.tsx","pages/ChaptersAndCovers.tsx","pages/plain/EndPage.tsx","pages/plain/Error.tsx","pages/plain/home/CameraIndicator.tsx","pages/plain/home/Frames.tsx","pages/plain/home/Cover.tsx","pages/plain/home/Links.tsx","pages/plain/home/Home.tsx","pages/plain/home/Permission.tsx","pages/plain/HomeCoil.tsx","App.tsx","index.tsx"],"names":["colorTheme","black","white","red","redLight","grayLight","charcoal","blue","green","yellow","yellowAlternative","background","light","dark","text","customTheme","tip","content","color","global","colors","font","family","borderSize","medium","small","breakpoints","value","large","xlarge","heading","responsiveBreakpoint","undefined","level","size","height","weight","paragraph","maxWidth","button","border","radius","width","padding","horizontal","vertical","layer","overlay","opacity","About","useContext","ResponsiveContext","Text","StyledStackLayer","styled","div","props","guiding","fillContainer","interactive","InteractiveStack","anchor","children","fill","guidingChild","rest","prunedChildren","Children","toArray","filter","c","guidingIndex","child","index","length","toChildIndex","styledChildren","map","buildStyledChildren","StyledStack","useQuery","location","useLocation","search","useMemo","URLSearchParams","RoutedAnchor","to","href","Anchor","as","RoutedButton","Button","QueryButton","query","history","useHistory","onClick","operation","delete","key","set","push","toString","Modal","onClose","frameColor","textColor","Layer","full","responsive","animate","position","onEsc","animation","Box","style","backgroundColor","ModalContainer","margin","top","bottom","gap","Frame","ScrollableFrame","ScrollableFrameLarge","overflow","className","outlineOffset","outline","useState","showBorder","setShowBorder","isSmall","ScrollableBox","CustomScrollbarBox","flex","Heading","onScroll","event","target","scrollTop","right","pad","ScrollingHeadingBlock","bottomBorderStyle","borderBottom","direction","justify","plain","label","ModalContent","left","max","align","Privacy","ModalSelector","close","useCallback","get","plainPageRoutes","chapterRoutes","chapterNumbers","chapterFlow","next","previous","chapterRouteNames","plainPageRouteNames","initialState","webcamStream","nextVideoToPlay","store","create","setWithLog","partial","replace","console","log","table","setWebcamStream","setNextVideoToPlay","useStore","createStoreHook","NavMenu","isUsingWebcam","state","modal","DropButton","alignSelf","dropContent","Nav","url","CheckBox","toggle","checked","onChange","getState","MediaStream","Accordion","AccordionPanel","includes","Menu","mergedTheme","deepMerge","PageContainer","Grommet","theme","ProgressIndicator","barElements","isCurrentSection","pathname","name","Tip","ChapterButtons","chapterNumber","ref","useRef","video","currentTime","paused","ended","readyState","isVideoPlaying","videoIsPlaying","setVideoIsPlaying","isIdle","setIdle","useEffect","localVideo","onEnded","addEventListener","onPlay","onPause","removeEventListener","timeout","onMouseMove","clearTimeout","setTimeout","window","isShown","icon","Play","play","bind","disabled","Pause","pause","FastForward","Rewind","VOLUME_STEP","PlayableSettingsMenu","onVolumeChange","Actions","dropAlign","dropBackground","items","Volume","VolumeLow","PlayableControls","active","playing","onSeek","duration","scrubberRef","scrubTime","setScrubTime","formattedTime","formatTime","percentagePlayed","scrub","current","scrubberRect","getBoundingClientRect","percent","clientX","seek","StyledVideo","over","hoverIndicator","Stack","Meter","thickness","values","tabIndex","role","Math","round","onMouseLeave","time","minutes","seconds","Playable","forwardRef","playable","mute","onTimeUpdate","setCurrentTime","setDuration","setPlaying","hasPlayed","setHasPlayed","interacting","setInteracting","setHeight","setWidth","containerRef","videoRef","innerRef","useForwardedRef","muted","timer","useLayoutEffect","videoHeight","rect","ratio","videoRatio","videoWidth","nextHeight","nextWidth","PlayableChild","onMouseEnter","onTouchStart","display","flexDirection","onDurationChange","deltaVolume","min","requestedVolume","volume","Chapter1","onFinished","sources","interactiveChild","fit","src","type","autoPlay","loop","Chapter2","Image","image","Chapter3","Video","controls","Chapter4","Chapter5","ChapterFinishCountDown","secondsRemaining","setSecondsRemaining","isCover","has","isChapter","clearInterval","Chapters","dimensions","use169Dimensions","isChapterFinished","setChapterFinished","alignContent","innerWidth","innerHeight","setSize","onResize","useWindowDimensions","pageWidth","pageHeight","widthAt16by9","CoverButtons","Launch","Cover1","canvasRef","contextRef","canvas","maybeContext","getContext","paint","pointerX","pointerY","context","requestAnimationFrame","x","y","fillStyle","sin","Date","now","beginPath","ellipse","PI","screenX","screenY","clientY","clip","clippedX","clippedY","relativeX","relativeY","getRelativeClickPosition","onTouchMove","changedTouches","getRelativeTouchPosition","onWindowResize","CustomRoutedButton","textContent","CustomQueryButton","WebcamPermissions","uiState","storeMediaStream","error","setError","connectWebcam","a","getVideoStream","maybeStream","getTracks","forEach","track","PermissionsWindow","primary","DisconnectedWindow","ErrorWindow","navigator","mediaDevices","DOMException","getUserMedia","facingMode","audio","stream","MediaStreamError","useAnimationFrame","frameRate","callback","requestRef","previousTimeRef","deltaTime","interval","setInterval","cancelAnimationFrame","MESH_ANNOTATIONS","silhouette","lipsUpperOuter","lipsLowerOuter","lipsUpperInner","lipsLowerInner","rightEyeUpper0","rightEyeLower0","rightEyeUpper1","rightEyeLower1","rightEyeUpper2","rightEyeLower2","rightEyeLower3","rightEyebrowUpper","rightEyebrowLower","leftEyeUpper0","leftEyeLower0","leftEyeUpper1","leftEyeLower1","leftEyeUpper2","leftEyeLower2","leftEyeLower3","leftEyebrowUpper","leftEyebrowLower","midwayBetweenEyes","noseTip","noseBottom","noseRightCorner","noseLeftCorner","rightCheek","leftCheek","PART_GROUPS","LEFT_EYE","part","flat","RIGHT_EYE","MOUTH","NOSE","FACE_PLANE","NOSE_TIP","SILHOUETTE","FaceTracker","keyPoints","keyPoints2","result","canvasContext","source","normalizedMesh","sourceAspect","aspect","normalizedBoundingBox","scaledMesh","viewport","aspectCorrection","mesh","scalingDimension","z","getMesh","boundingBox","topLeft","bottomRight","getBoundingBox","parts","entries","Object","indices","_","fromEntries","getParts","facePlane","facePlanePoints","Error","getPlaneFromPoints","getFacePlane","zRotation","rightCheeck","distance","atan2","getHeadZRotation","setNormalizedMesh","zIndex","orthographic","pixelRatio","devicePixelRatio","webgl1","camera","near","far","noEvents","onPointerMove","onCreated","pointA","pointB","pointC","A","Vector3","fromArray","B","C","AB","clone","sub","AC","normal","cross","offset","pendingPromise","VideoPartRenderer","maxPoints","useFrame","geometry","partsInStore","attribute","getAttribute","setDrawRange","needsUpdate","drawRange","start","count","attachObject","itemSize","array","Float32Array","VideoDetector","results","hasLoadedData","srcObject","getSettings","getKeyPoints","main","isProcessing","finally","useOverrideAnimationFrame","model","loadModelIfNeeded","faceLandmarksDetection","mediapipeFacemesh","maxFaces","shouldLoadIrisModel","input","estimateFaces","returnTensors","predictIrises","predictions","firstFacePrediction","inputDimensions","getInputDimensions","getNormalizedMesh","getNormalizedBoundingBox","Cover2","Cover3","Cover4","Cover5","covers","Covers","coverIndex","parseInt","load","Number","isInteger","RouteChaptersAndCovers","path","ChaptersAndCovers","isRecording","EndPage","Paragraph","CameraIndicator","margins","PageFrame","CoverFrame","HeadingBlock","Cover","CoverContainer","Grid","areas","end","columns","rows","gridArea","CoverContent","marginTop","marginHorizontal","LinksSmall","Links","LinksFloating","LinkFrame","LinksHeading","Home","HomeContainer","HomeContent","Permission","PermissionContainer","PermissionContent","textDecoration","HomeCoil","routeToComponent","component","App","basename","exact","WebFont","custom","families","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.63b1b18f.chunk.js","sourcesContent":["export const colorTheme = {\n  black: \"#202122\",\n  white: \"#FFFFFF\",\n  red: \"#E01010\",\n  redLight: \"#FF5959\",\n  grayLight: \"#A2A9B1\",\n  charcoal: \"#2C2A21\",\n  blue: \"#312DFF\",\n  green: \"#168500\",\n  yellow: \"#FFD237\",\n  yellowAlternative: \"#E8C100\",\n  background: { light: \"#FFD237\", dark: \"#202122\" },\n  text: { light: \"#202122\" },\n} as const;\n","import { ThemeType } from \"grommet\";\nimport { colorTheme } from \"./colorTheme\";\n\nexport const customTheme: ThemeType = {\n  tip: {\n    content: {\n      background: {\n        color: \"white\",\n      },\n    },\n  },\n  global: {\n    colors: {\n      ...colorTheme,\n    },\n    font: {\n      family: \"Roboto, sans-serif\",\n    },\n    borderSize: {\n      medium: \"5px\",\n      small: \"1px\",\n    },\n\n    breakpoints: {\n      small: {\n        value: 767,\n      },\n      medium: {\n        value: 1199,\n      },\n      large: {\n        value: 1439,\n      },\n      xlarge: {},\n    },\n  },\n  heading: {\n    responsiveBreakpoint: undefined,\n    level: {\n      \"1\": {\n        small: {\n          size: \"32px\",\n          height: \"48px\",\n        },\n        medium: {\n          size: \"48px\",\n          height: \"56.25px\",\n        },\n      },\n      \"2\": {\n        small: {\n          size: \"24px\",\n          height: \"32px\",\n        },\n      },\n    },\n    weight: 400,\n  },\n  paragraph: {\n    small: {\n      size: \"24px\",\n      height: \"32px\",\n      maxWidth: undefined,\n    },\n    medium: {\n      size: \"32px\",\n      height: \"48px\",\n      maxWidth: undefined,\n    },\n  },\n  text: {\n    small: {\n      size: \"24px\",\n      height: \"32px\",\n      maxWidth: undefined,\n    },\n    medium: {\n      size: \"32px\",\n      height: \"48px\",\n      maxWidth: undefined,\n    },\n    \"2xl?\": {},\n    \"3xl?\": {},\n    \"4xl?\": {},\n    \"5xl?\": {},\n    \"6xl?\": {},\n  },\n  button: {\n    border: {\n      radius: \"0\",\n      width: \"3px\",\n    },\n    padding: {\n      horizontal: \"30px\",\n      vertical: \"10px\",\n    },\n    size: {\n      small: {\n        border: {\n          radius: \"0\",\n        },\n      },\n    },\n  },\n  layer: {\n    overlay: {\n      background: {\n        opacity: 0,\n      },\n    },\n  },\n};\n","import { ResponsiveContext, Text } from \"grommet\";\nimport React, { useContext } from \"react\";\n\nexport const About = () => {\n  const size = useContext(ResponsiveContext) as\n    | \"small\"\n    | \"medium\"\n    | \"large\"\n    | \"xlarge\";\n  return (\n    <>\n      <Text size={size === \"small\" ? \"small\" : \"medium\"}>\n        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Eget euism\n        neque, sed justo, nibh pulvinar fringilla euismod scelerisque. Eu et\n        scelerisque maecenas magna dolor id arcu massa orci. Nunc commodo neque,\n        quis eu eget imperdiet purus duis. Venenatis, amet sapien sollicitudin\n        auctor sed gravida aliquet bibendum.\n        <br />\n        <br />\n        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Eget euismod\n        neque, sed justo, nibh pulvinar fringilla euismod scelerisque. Eu et\n        scelerisque maecenas magna dolor id arcu massa orci. Nunc commodo neque,\n        quis eu eget imperdiet purus duis. Venenatis, amet sapien sollicitudin\n        auctor sed gravida aliquet bibendum.\n        <br />\n        <br />\n        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Eget euismod\n        neque, sed justo, nibh pulvinar fringilla euismod scelerisque. Eu et\n        scelerisque maecenas magna dolor id arcu massa orci. Nunc commodo neque,\n        quis eu eget imperdiet purus duis. Venenatis, amet sapien sollicitudin\n        auctor sed gravida aliquet bibendum.\n      </Text>\n    </>\n  );\n};\n","import React, { Children, PropsWithChildren } from \"react\";\n\nimport { StyledStack } from \"grommet/components/Stack/StyledStack\";\nimport { StackProps } from \"grommet\";\nimport styled from \"styled-components\";\n\nconst StyledStackLayer = styled.div<{\n  guiding?: boolean;\n  fillContainer?: boolean | \"horizontal\" | \"vertical\";\n  interactive: boolean;\n}>`\n  position: ${(props) => (props.guiding ? \"relative\" : \"absolute\")};\n  ${(props) => props.guiding && \"display: block;\"}\n  ${(props) =>\n    !props.guiding &&\n    `\n  top: 0;\n  left: 0;\n  right: 0;\n`}\n  ${(props) =>\n    props.fillContainer &&\n    `\n    width: 100%;\n    height: 100%;\n  `}\n  ${(props) => !props.interactive && `pointer-events: none;`}\n`;\n\nconst buildStyledChildren = ({\n  anchor,\n  fill,\n  guidingIndex,\n}: {\n  anchor: StackProps[\"anchor\"];\n  fill: StackProps[\"fill\"];\n  guidingIndex: number;\n}) => (child: any, index: string | number | null | undefined) => {\n  const isGuidingIndex = index === guidingIndex;\n  const props = isGuidingIndex ? { guiding: true, fillContainer: fill } : {};\n\n  return (\n    <StyledStackLayer key={index} interactive={true} {...props}>\n      {child}\n    </StyledStackLayer>\n  );\n};\n\nexport const InteractiveStack = ({\n  anchor,\n  children,\n  fill,\n  guidingChild,\n  ...rest\n}: PropsWithChildren<Omit<StackProps, \"interactiveChild\">>) => {\n  const prunedChildren = Children.toArray(children).filter((c) => c);\n  const toChildIndex = (child: number | \"first\" | \"last\" | undefined) => {\n    let index = child;\n    if (index === \"first\" || !index) index = 0;\n    else if (index === \"last\") index = prunedChildren.length - 1;\n    return index;\n  };\n\n  const guidingIndex = toChildIndex(guidingChild);\n\n  const styledChildren = prunedChildren.map((child, index) => {\n    return buildStyledChildren({\n      anchor,\n      fill,\n      guidingIndex,\n    })(child, index);\n  });\n\n  return (\n    <StyledStack fillContainer={fill} {...rest}>\n      {styledChildren}\n    </StyledStack>\n  );\n};\n","import { Anchor, AnchorProps, Button, ButtonProps } from \"grommet\";\nimport React, { useMemo } from \"react\";\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\nimport { Routes } from \"../Routes\";\n\nexport function useQuery() {\n  const location = useLocation().search;\n  return useMemo(() => new URLSearchParams(location), [location]);\n}\n\nexport const RoutedAnchor = (props: AnchorProps & { href: Routes }) => {\n  return (\n    <Link to={props.href}>\n      <Anchor {...props} as={\"div\"} />\n    </Link>\n  );\n};\n\nexport const RoutedButton = (\n  props: ButtonProps & { href: Routes } & Pick<\n      React.DetailedHTMLProps<\n        React.ButtonHTMLAttributes<HTMLButtonElement>,\n        HTMLButtonElement\n      >,\n      \"onClick\"\n    >\n) => {\n  return (\n    <Link to={props.href}>\n      <Button {...props} as={\"div\"} />\n    </Link>\n  );\n};\n\nexport const QueryButton = (\n  props: ButtonProps & {\n    query: {\n      key: \"modal\";\n      value: \"about\" | \"privacy\" | \"credits\";\n      operation: \"open\" | \"close\";\n    };\n  } & Pick<\n      React.DetailedHTMLProps<\n        React.ButtonHTMLAttributes<HTMLButtonElement>,\n        HTMLButtonElement\n      >,\n      \"onClick\"\n    >\n) => {\n  const query = useQuery();\n  const history = useHistory();\n\n  return (\n    <Button\n      {...props}\n      as={\"div\"}\n      onClick={() => {\n        if (props.query.operation === \"close\") {\n          query.delete(props.query.key);\n        } else {\n          query.set(props.query.key, props.query.value);\n        }\n        history.push({\n          ...history.location,\n          search: query.toString(),\n        });\n      }}\n    />\n  );\n};\n","import { Box, BoxProps, Heading, Layer, ResponsiveContext } from \"grommet\";\nimport React, {\n  CSSProperties,\n  PropsWithChildren,\n  useContext,\n  useState,\n} from \"react\";\nimport styled from \"styled-components\";\nimport { colorTheme } from \"../../../components/colorTheme\";\nimport { InteractiveStack } from \"../../../components/InteractiveStack\";\nimport { QueryButton } from \"../../../components/RoutedAnchor\";\n\nexport const Modal = ({\n  onClose,\n  children,\n  frameColor,\n  textColor,\n  heading,\n}: PropsWithChildren<{\n  onClose: () => void;\n  frameColor: string;\n  textColor: string;\n  heading: string;\n}>) => {\n  return (\n    <>\n      <Layer\n        full\n        responsive={false}\n        animate\n        position={\"bottom\"}\n        onEsc={onClose}\n        animation={\"fadeIn\"}\n      >\n        <Box fill background=\"yellowAlternative\"></Box>\n      </Layer>\n      <Layer\n        full\n        responsive={false}\n        animate\n        position={\"bottom\"}\n        onEsc={onClose}\n        animation={\"slide\"}\n        style={{\n          backgroundColor: \"rgba(0,0,0,0)\",\n        }}\n      >\n        <ModalContainer\n          frameColor={frameColor}\n          textColor={textColor}\n          heading={heading}\n        >\n          <ModalContent>{children}</ModalContent>\n        </ModalContainer>\n      </Layer>\n    </>\n  );\n};\n\nexport const ModalContainer = ({\n  children,\n  textColor,\n  frameColor,\n  heading,\n}: PropsWithChildren<{\n  frameColor: string;\n  textColor: string;\n  heading: string;\n}>) => {\n  const size = useContext(ResponsiveContext) as\n    | \"small\"\n    | \"medium\"\n    | \"large\"\n    | \"xlarge\";\n\n  let props: BoxProps;\n  switch (size) {\n    case \"small\":\n      props = {\n        margin: { horizontal: \"32px\", top: \"32px\", bottom: \"-4px\" },\n        gap: \"48px\",\n      };\n      break;\n    case \"medium\":\n      props = {\n        margin: { horizontal: \"48px\", top: \"48px\", bottom: \"-4px\" },\n        gap: \"48px\",\n      };\n      break;\n    case \"large\":\n      props = {\n        margin: { horizontal: \"48px\", top: \"48px\", bottom: \"-4px\" },\n      };\n      break;\n    case \"xlarge\":\n      props = {\n        margin: { horizontal: \"48px\", top: \"48px\", bottom: \"-4px\" },\n      };\n      break;\n  }\n\n  const Frame =\n    size === \"small\" || size === \"medium\"\n      ? ScrollableFrame\n      : ScrollableFrameLarge;\n  return (\n    <Box fill overflow=\"hidden\">\n      <Box className=\"modal container\" {...props} background=\"yellow\">\n        <Frame textColor={textColor} frameColor={frameColor} heading={heading}>\n          {children}\n        </Frame>\n      </Box>\n    </Box>\n  );\n};\n\nconst ScrollableFrame = ({\n  children,\n  frameColor,\n  textColor,\n  heading,\n}: PropsWithChildren<{\n  frameColor: string;\n  textColor: string;\n  heading: string;\n}>) => {\n  const style: CSSProperties = {\n    outlineOffset: `-4px`,\n    outline: `4px ${frameColor} solid`,\n  };\n\n  const [showBorder, setShowBorder] = useState(false);\n  const isSmall = useContext(ResponsiveContext) === \"small\";\n\n  const ScrollableBox = isSmall ? Box : CustomScrollbarBox;\n\n  return (\n    <Box className=\"scrollable-frame\" style={style} flex={false} fill>\n      <ScrollingHeadingBlock frameColor={frameColor} showBorder={showBorder}>\n        <Heading\n          level={1}\n          color={textColor}\n          margin=\"0\"\n          size={isSmall ? \"small\" : \"medium\"}\n        >\n          {heading}\n        </Heading>\n      </ScrollingHeadingBlock>\n\n      <Box fill>\n        <ScrollableBox\n          flex={false}\n          overflow={{ horizontal: \"hidden\", vertical: \"auto\" }}\n          onScroll={(event) =>\n            setShowBorder((event.target as HTMLElement).scrollTop !== 0)\n          }\n          height=\"100%\"\n          margin={{ right: isSmall ? \"0\" : \"12px\" }}\n        >\n          {children}\n        </ScrollableBox>\n      </Box>\n    </Box>\n  );\n};\n\nconst ScrollableFrameLarge = ({\n  children,\n  frameColor,\n  textColor,\n  heading,\n}: PropsWithChildren<{\n  frameColor: string;\n  textColor: string;\n  heading: string;\n}>) => {\n  const style: CSSProperties = {\n    outlineOffset: `-4px`,\n    outline: `4px ${frameColor} solid`,\n  };\n  const isSmall = useContext(ResponsiveContext) === \"small\";\n\n  const ScrollableBox = isSmall ? Box : CustomScrollbarBox;\n\n  return (\n    <Box className=\"scrollable-frame\" style={style} flex={false} fill>\n      <InteractiveStack fill>\n        <Box fill>\n          <ScrollableBox\n            flex={false}\n            overflow={{ horizontal: \"hidden\", vertical: \"auto\" }}\n            height=\"100%\"\n            pad={{ top: \"76px\" }}\n            margin={{ right: \"12px\", top: \"12px\" }}\n          >\n            {children}\n          </ScrollableBox>\n        </Box>\n        <Box margin={{ right: \"32px\" }}>\n          <ScrollingHeadingBlock frameColor={frameColor} showBorder={false}>\n            <Heading\n              level={1}\n              color={textColor}\n              margin=\"0\"\n              size={isSmall ? \"small\" : \"medium\"}\n            >\n              {heading}\n            </Heading>\n          </ScrollingHeadingBlock>\n        </Box>\n      </InteractiveStack>\n    </Box>\n  );\n};\n\nconst CustomScrollbarBox = styled(Box)`\n  &::-webkit-scrollbar {\n    width: 20px;\n  }\n\n  &::-webkit-scrollbar-track {\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background-color: ${colorTheme.yellowAlternative};\n    outline-offset: -2px;\n    outline: 2px solid ${colorTheme.black};\n  }\n`;\n\nconst ScrollingHeadingBlock = ({\n  frameColor,\n  children,\n  showBorder,\n}: PropsWithChildren<{\n  frameColor: string;\n  showBorder: boolean;\n}>) => {\n  const size = useContext(ResponsiveContext);\n\n  let bottomBorderStyle = {};\n  if (size === \"small\" || size === \"medium\") {\n    bottomBorderStyle = showBorder\n      ? { borderBottom: `4px solid ${colorTheme.yellowAlternative}` }\n      : { borderBottom: `4px solid ${colorTheme.yellow}` };\n  }\n  const isSmall = useContext(ResponsiveContext) === \"small\";\n\n  return (\n    <Box\n      flex={false}\n      className=\"heading-block\"\n      direction=\"row\"\n      style={bottomBorderStyle}\n      justify={\"between\"}\n    >\n      <Box\n        background={frameColor}\n        pad={{ horizontal: \"20px\", vertical: \"12px\" }}\n      >\n        {children}\n      </Box>\n      <Box pad={{ horizontal: \"20px\", vertical: \"12px\" }}>\n        <QueryButton\n          query={{ key: \"modal\", value: \"credits\", operation: \"close\" }}\n          href=\"/credits\"\n          plain\n          fill\n          label={\n            <Heading level={1} margin=\"0\" size={isSmall ? \"small\" : \"medium\"}>\n              X\n            </Heading>\n          }\n        />\n      </Box>\n    </Box>\n  );\n};\n\nconst ModalContent = ({ children }: PropsWithChildren<{}>) => {\n  const size = useContext(ResponsiveContext) as\n    | \"small\"\n    | \"medium\"\n    | \"large\"\n    | \"xlarge\";\n\n  let props: BoxProps;\n  switch (size) {\n    case \"small\":\n      props = {\n        margin: { left: \"18px\", right: \"18px\", top: \"56px\" },\n        pad: { bottom: \"68px\" },\n      };\n      break;\n    case \"medium\":\n      props = {\n        margin: { left: \"60px\", right: \"28px\", top: \"48px\" },\n        width: { max: \"768px\" },\n        pad: { bottom: \"132px\" },\n      };\n      break;\n    case \"large\":\n      props = {\n        margin: { left: \"168px\", right: \"136px\", top: \"48px\" },\n        width: { max: \"768px\" },\n        pad: { bottom: \"132px\" },\n      };\n      break;\n    case \"xlarge\":\n      props = {\n        margin: { left: \"288px\", right: \"256px\", top: \"48px\" },\n        width: { max: \"768px\" },\n        pad: { bottom: \"132px\" },\n      };\n      break;\n  }\n  return (\n    <Box align=\"center\">\n      <Box gap={\"40px\"} {...props} flex={false}>\n        {children}\n      </Box>\n    </Box>\n  );\n};\n","import { ResponsiveContext, Text } from \"grommet\";\nimport React, { useContext } from \"react\";\n\nexport const Privacy = () => {\n  const size = useContext(ResponsiveContext) as\n    | \"small\"\n    | \"medium\"\n    | \"large\"\n    | \"xlarge\";\n  return (\n    <>\n      <Text size={size === \"small\" ? \"small\" : \"medium\"}>\n        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Eget euism\n        neque, sed justo, nibh pulvinar fringilla euismod scelerisque. Eu et\n        scelerisque maecenas magna dolor id arcu massa orci. Nunc commodo neque,\n        quis eu eget imperdiet purus duis. Venenatis, amet sapien sollicitudin\n        auctor sed gravida aliquet bibendum.\n        <br />\n        <br />\n        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Eget euismod\n        neque, sed justo, nibh pulvinar fringilla euismod scelerisque. Eu et\n        scelerisque maecenas magna dolor id arcu massa orci. Nunc commodo neque,\n        quis eu eget imperdiet purus duis. Venenatis, amet sapien sollicitudin\n        auctor sed gravida aliquet bibendum.\n        <br />\n        <br />\n        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Eget euismod\n        neque, sed justo, nibh pulvinar fringilla euismod scelerisque. Eu et\n        scelerisque maecenas magna dolor id arcu massa orci. Nunc commodo neque,\n        quis eu eget imperdiet purus duis. Venenatis, amet sapien sollicitudin\n        auctor sed gravida aliquet bibendum.\n      </Text>\n    </>\n  );\n};\n","import React, { useCallback } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { About } from \"../pages/plain/home/About\";\nimport { Modal } from \"../pages/plain/home/Modal\";\nimport { Privacy } from \"../pages/plain/home/Privacy\";\nimport { colorTheme } from \"./colorTheme\";\nimport { useQuery } from \"./RoutedAnchor\";\n\nexport const ModalSelector = () => {\n  const query = useQuery();\n  const history = useHistory();\n\n  const close = useCallback(() => {\n    query.delete(\"modal\");\n    history.push({\n      ...history.location,\n      search: query.toString(),\n    });\n  }, [history, query]);\n\n  switch (query.get(\"modal\")) {\n    case \"about\":\n      return (\n        <Modal\n          onClose={close}\n          frameColor={colorTheme.blue}\n          textColor={colorTheme.white}\n          heading=\"About\"\n        >\n          <About />\n        </Modal>\n      );\n    case \"privacy\":\n      return (\n        <Modal\n          onClose={close}\n          frameColor={colorTheme.red}\n          textColor={colorTheme.white}\n          heading=\"Privacy\"\n        >\n          <Privacy />\n        </Modal>\n      );\n    case \"credits\":\n      return (\n        <Modal\n          onClose={close}\n          frameColor={colorTheme.green}\n          textColor={colorTheme.white}\n          heading=\"Credits\"\n        >\n          <Privacy />\n        </Modal>\n      );\n    default:\n      return null;\n  }\n};\n","export const routes = [\n  \"/\",\n  \"/home\",\n  \"/cover\",\n  \"/permissions\",\n  \"/coil\",\n  \"/error\",\n  \"/chapter/1?isCover\",\n  \"/chapter/1?isChapter\",\n  \"/chapter/2?isCover\",\n  \"/chapter/2?isChapter\",\n  \"/chapter/3?isCover\",\n  \"/chapter/3?isChapter\",\n  \"/chapter/4?isCover\",\n  \"/chapter/4?isChapter\",\n  \"/chapter/5?isCover\",\n  \"/chapter/5?isChapter\",\n  \"/end\",\n] as const;\n\nexport type Routes = typeof routes[number];\nexport type PlainPageRoutes = Exclude<Routes, `/chapter/${string}`>;\nexport type ChapterRoutes = Routes & `/chapter/${string}`;\n\nexport const plainPageRoutes: readonly PlainPageRoutes[] = [\n  \"/\",\n  \"/coil\",\n  \"/end\",\n  \"/error\",\n] as const;\n\nexport const chapterRoutes: readonly ChapterRoutes[] = [\n  \"/chapter/1?isCover\",\n  \"/chapter/1?isChapter\",\n  \"/chapter/2?isCover\",\n  \"/chapter/2?isChapter\",\n  \"/chapter/3?isCover\",\n  \"/chapter/3?isChapter\",\n  \"/chapter/4?isCover\",\n  \"/chapter/4?isChapter\",\n  \"/chapter/5?isCover\",\n  \"/chapter/5?isChapter\",\n] as const;\n\nexport type ChapterNumbers = ChapterRoutes &\n  `/chapter/${number}?isCover` extends `/chapter/${infer ChapterNumber}?isCover`\n  ? ChapterNumber\n  : never;\n\nexport const chapterNumbers: ChapterNumbers[] = [\"1\", \"2\", \"3\", \"4\", \"5\"];\n\nexport const chapterFlow: Record<\n  ChapterRoutes,\n  { next: Routes; previous: Routes }\n> = {\n  \"/chapter/1?isCover\": {\n    next: \"/chapter/1?isChapter\",\n    previous: \"/\",\n  },\n  \"/chapter/1?isChapter\": {\n    next: \"/chapter/2?isCover\",\n    previous: \"/chapter/1?isCover\",\n  },\n  \"/chapter/2?isCover\": {\n    next: \"/chapter/2?isChapter\",\n    previous: \"/chapter/1?isCover\",\n  },\n  \"/chapter/2?isChapter\": {\n    next: \"/chapter/3?isCover\",\n    previous: \"/chapter/2?isCover\",\n  },\n  \"/chapter/3?isCover\": {\n    next: \"/chapter/3?isChapter\",\n    previous: \"/chapter/2?isCover\",\n  },\n  \"/chapter/3?isChapter\": {\n    next: \"/chapter/4?isCover\",\n    previous: \"/chapter/3?isCover\",\n  },\n  \"/chapter/4?isCover\": {\n    next: \"/chapter/4?isChapter\",\n    previous: \"/chapter/3?isCover\",\n  },\n  \"/chapter/4?isChapter\": {\n    next: \"/chapter/5?isCover\",\n    previous: \"/chapter/4?isCover\",\n  },\n  \"/chapter/5?isCover\": {\n    next: \"/chapter/5?isChapter\",\n    previous: \"/chapter/4?isCover\",\n  },\n  \"/chapter/5?isChapter\": {\n    next: \"/end\",\n    previous: \"/chapter/5?isCover\",\n  },\n} as const;\n\nexport const chapterRouteNames: { [key in ChapterRoutes]: string } = {\n  \"/chapter/1?isChapter\": \" Chapter 1\",\n  \"/chapter/2?isChapter\": \" Chapter 2\",\n  \"/chapter/3?isChapter\": \" Chapter 3\",\n  \"/chapter/4?isChapter\": \" Chapter 4\",\n  \"/chapter/5?isChapter\": \" Chapter 5\",\n  \"/chapter/1?isCover\": \" Cover 1\",\n  \"/chapter/2?isCover\": \" Cover 2\",\n  \"/chapter/3?isCover\": \" Cover 3\",\n  \"/chapter/4?isCover\": \" Cover 4\",\n  \"/chapter/5?isCover\": \" Cover 5\",\n} as const;\n\nexport const plainPageRouteNames: { [key in PlainPageRoutes]: string } = {\n  \"/\": \"Home\",\n  \"/cover\": \"Template Cover\",\n  \"/home\": \"Home\",\n  \"/permissions\": \"Permissions\",\n  \"/coil\": \"Coil\",\n  \"/end\": \"End\",\n  \"/error\": \"Error\",\n} as const;\n","import createStoreHook from \"zustand\";\nimport create, { SetState } from \"zustand/vanilla\";\n\ntype State = {\n  webcamStream: MediaStream | undefined | \"DISCONNECTED\" | \"NOT_USED\";\n  nextVideoToPlay: HTMLVideoElement | undefined;\n  setWebcamStream(\n    webcamStream: MediaStream | \"DISCONNECTED\" | \"NOT_USED\" | undefined\n  ): void;\n  setNextVideoToPlay(nextVideoToPlay: HTMLVideoElement | undefined): void;\n};\n\nconst initialState: NonFunctionProperties<State> = {\n  webcamStream: undefined,\n  nextVideoToPlay: undefined,\n};\nexport const store = create<State>((set, get) => {\n  const setWithLog: SetState<State> = (partial, replace) => {\n    console.log(\"Changed state with partial:\");\n    console.table(partial);\n    set(partial, replace);\n  };\n  return {\n    ...initialState,\n    setWebcamStream(webcamStream: MediaStream | \"NOT_USED\") {\n      setWithLog({ webcamStream });\n    },\n    setNextVideoToPlay(nextVideoToPlay: HTMLVideoElement | undefined) {\n      setWithLog({ nextVideoToPlay });\n    },\n  };\n});\n\nexport const useStore = createStoreHook(store);\n\n// Type helpers\ntype CallbackFunctionVariadic = (...args: never[]) => void;\ntype NonFunctionPropertyNames<T> = {\n  [K in keyof T]: T[K] extends CallbackFunctionVariadic ? never : K;\n}[keyof T];\ntype NonFunctionProperties<T> = Pick<T, NonFunctionPropertyNames<T>>;\n","import {\n  Accordion,\n  AccordionPanel,\n  Anchor,\n  Box,\n  CheckBox,\n  DropButton,\n  Layer,\n  Nav,\n} from \"grommet\";\nimport { Menu } from \"grommet-icons\";\nimport {\n  chapterRouteNames,\n  chapterRoutes,\n  plainPageRouteNames,\n  plainPageRoutes,\n} from \"../Routes\";\nimport { store, useStore } from \"../store/store\";\nimport { RoutedAnchor } from \"./RoutedAnchor\";\n\nexport const NavMenu = () => {\n  const isUsingWebcam = useStore((state) => state.webcamStream !== \"NOT_USED\");\n  return (\n    <Layer\n      modal={false}\n      position=\"top-left\"\n      responsive={false}\n      background={\"yellow\"}\n    >\n      <Box pad=\"small\">\n        <DropButton\n          alignSelf=\"start\"\n          dropContent={\n            <Nav direction=\"column\" background=\"brand\">\n              {plainPageRoutes.map((url) => (\n                <RoutedAnchor\n                  href={url}\n                  label={plainPageRouteNames[url]}\n                  key={url}\n                />\n              ))}\n\n              <CheckBox\n                toggle\n                label=\"Webcam\"\n                checked={isUsingWebcam}\n                onChange={(event) => {\n                  if (event.target.checked) {\n                    const maybeStream = store.getState().webcamStream;\n                    if (maybeStream instanceof MediaStream) {\n                    } else {\n                      store.getState().setWebcamStream(undefined);\n                    }\n                  } else {\n                    store.getState().setWebcamStream(\"NOT_USED\");\n                  }\n                }}\n              />\n\n              <Accordion animate direction=\"row\">\n                <AccordionPanel label={<Anchor label=\"Chapters\" />}>\n                  {chapterRoutes\n                    .filter((url) => url.includes(\"isChapter\"))\n                    .map((url) => (\n                      <RoutedAnchor\n                        href={url}\n                        label={chapterRouteNames[url]}\n                        key={url}\n                      />\n                    ))}\n                </AccordionPanel>\n                <AccordionPanel label={<Anchor label=\"Covers\" />}>\n                  {chapterRoutes\n                    .filter((url) => url.includes(\"isCover\"))\n                    .map((url) => (\n                      <RoutedAnchor\n                        href={url}\n                        label={chapterRouteNames[url]}\n                        key={url}\n                      />\n                    ))}\n                </AccordionPanel>\n              </Accordion>\n            </Nav>\n          }\n        >\n          <Menu />\n        </DropButton>\n      </Box>\n    </Layer>\n  );\n};\n","import { Grommet } from \"grommet\";\nimport { deepMerge } from \"grommet/utils\";\nimport React, { PropsWithChildren } from \"react\";\nimport { customTheme } from \"./customTheme\";\nimport { ModalSelector } from \"./ModalSelector\";\nimport { NavMenu } from \"./NavMenu\";\n\nconst mergedTheme = deepMerge(customTheme);\n\nexport const PageContainer = ({ children }: PropsWithChildren<{}>) => {\n  return (\n    <Grommet theme={mergedTheme} full background=\"yellow\">\n      <NavMenu />\n      {children}\n      <ModalSelector />\n    </Grommet>\n  );\n};\n","import { Box, Tip } from \"grommet\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport { chapterRouteNames, chapterRoutes } from \"../Routes\";\n\nexport const ProgressIndicator = () => {\n  const history = useHistory();\n  const location = useLocation();\n\n  const barElements = chapterRoutes.map((url) => {\n    const isCurrentSection = location.pathname + location.search === url;\n    const name = chapterRouteNames[url];\n    return (\n      <Tip content={name} key={url + isCurrentSection}>\n        <Box\n          fill\n          background={isCurrentSection ? \"lightgrey\" : \"grey\"}\n          onClick={() => {\n            history.push(url);\n          }}\n        />\n      </Tip>\n    );\n  });\n  return (\n    <Box\n      fill=\"horizontal\"\n      background=\"lightgrey\"\n      height=\"10px\"\n      gap=\"xxsmall\"\n      direction=\"row\"\n      justify=\"evenly\"\n    >\n      {barElements}\n    </Box>\n  );\n};\n","import { Box, Button, Layer } from \"grommet\";\nimport { FastForward, Pause, Play, Rewind } from \"grommet-icons\";\nimport { useEffect, useRef, useState } from \"react\";\nimport { ProgressIndicator } from \"../../components/ProgressIndicator\";\nimport { RoutedButton } from \"../../components/RoutedAnchor\";\nimport { chapterFlow, ChapterNumbers } from \"../../Routes\";\nimport { useStore } from \"../../store/store\";\n\nconst isVideoPlaying = function (video: HTMLVideoElement) {\n  return !!(\n    video.currentTime > 0 &&\n    !video.paused &&\n    !video.ended &&\n    video.readyState > 2\n  );\n};\n\nexport const ChapterButtons = ({\n  chapterNumber,\n}: {\n  chapterNumber: ChapterNumbers;\n}) => {\n  const ref = useRef<HTMLDivElement>(null);\n  const url = `/chapter/${chapterNumber}?isChapter` as const;\n  const video = useStore((state) => state.nextVideoToPlay);\n  const [videoIsPlaying, setVideoIsPlaying] = useState(\n    video && isVideoPlaying(video)\n  );\n\n  const [isIdle, setIdle] = useState(false);\n\n  useEffect(() => {\n    const localVideo = video;\n    if (!localVideo) return;\n    const onEnded = () => {\n      setVideoIsPlaying(false);\n    };\n    localVideo.addEventListener(\"ended\", onEnded);\n\n    const onPlay = () => {\n      setVideoIsPlaying(true);\n    };\n    localVideo.addEventListener(\"play\", onPlay);\n\n    const onPause = () => {\n      setVideoIsPlaying(false);\n    };\n    localVideo.addEventListener(\"pause\", onPause);\n\n    return () => {\n      localVideo.removeEventListener(\"ended\", onEnded);\n      localVideo.removeEventListener(\"play\", onPlay);\n      localVideo.removeEventListener(\"pause\", onPause);\n    };\n  }, [video]);\n\n  useEffect(() => {\n    let timeout: NodeJS.Timeout | undefined = undefined;\n    const onMouseMove = () => {\n      if (!!timeout) {\n        clearTimeout(timeout);\n        timeout = undefined;\n      }\n      timeout = setTimeout(() => setIdle(true), 1000);\n      setIdle(false);\n    };\n    window.addEventListener(\"mousemove\", onMouseMove);\n\n    return () => {\n      timeout && clearTimeout(timeout);\n      window.removeEventListener(\"mousemove\", onMouseMove);\n    };\n  }, []);\n\n  const isShown = !videoIsPlaying || !isIdle;\n\n  return (\n    <>\n      {isShown && (\n        <Layer\n          ref={ref as any}\n          full=\"horizontal\"\n          modal={false}\n          position=\"bottom\"\n          responsive={false}\n          plain\n        >\n          <Box\n            alignSelf=\"center\"\n            direction=\"row\"\n            background=\"grey\"\n            margin={{ bottom: \"small\" }}\n          >\n            <Button\n              icon={<Play />}\n              onClick={video?.play.bind(video)}\n              disabled={videoIsPlaying}\n            />\n            <Button\n              icon={<Pause />}\n              onClick={video?.pause.bind(video)}\n              disabled={!videoIsPlaying}\n            />\n            <RoutedButton\n              icon={<FastForward />}\n              href={chapterFlow[url].next}\n              onClick={video?.pause.bind(video)}\n            />\n            <RoutedButton\n              icon={<Rewind />}\n              href={chapterFlow[url].previous}\n              onClick={video?.pause.bind(video)}\n            />\n          </Box>\n          <ProgressIndicator />\n        </Layer>\n      )}\n    </>\n  );\n};\n","import { Menu } from \"grommet\";\nimport { Actions, Volume, VolumeLow } from \"grommet-icons\";\n\n// Split the volume control into 6 segments. Empirically determined.\nconst VOLUME_STEP = 0.166667;\nexport const PlayableSettingsMenu = ({\n  onVolumeChange,\n}: {\n  onVolumeChange: (deltaVolume: number) => void;\n}) => {\n  return (\n    <Menu\n      icon={<Actions />}\n      dropAlign={{ bottom: \"top\", right: \"right\" }}\n      dropBackground={{\n        color: \"background-back\",\n        opacity: \"strong\",\n      }}\n      items={[\n        {\n          icon: <Volume />,\n          onClick: () => onVolumeChange(VOLUME_STEP),\n          close: false,\n        },\n        {\n          icon: <VolumeLow />,\n          onClick: () => onVolumeChange(-VOLUME_STEP),\n          close: false,\n        },\n      ]}\n    />\n  );\n};\n","import { Box, Button, Meter, Stack, Text } from \"grommet\";\nimport { Pause, Play } from \"grommet-icons\";\nimport {\n  StyledVideoControls,\n  StyledVideoScrubber,\n} from \"grommet/components/Video/StyledVideo\";\nimport React, { useCallback, useRef, useState } from \"react\";\nimport { PlayableSettingsMenu } from \"./PlayableSettingsMenu\";\n\nexport const PlayableControls = ({\n  onVolumeChange,\n  onPause,\n  onPlay,\n  active,\n  playing,\n  onSeek,\n  duration,\n  currentTime,\n}: {\n  onVolumeChange: (volume: number) => void;\n  onPause: () => void;\n  onPlay: () => void;\n  onSeek: (time: number) => void;\n  active: boolean;\n  playing: boolean;\n  duration: number;\n  currentTime: number;\n}) => {\n  const scrubberRef = useRef<HTMLElement>();\n  const [scrubTime, setScrubTime] = useState<number>();\n  const formattedTime = formatTime(scrubTime || currentTime || duration);\n  const percentagePlayed = (currentTime / duration) * 100;\n\n  const scrub = useCallback(\n    (event: React.MouseEvent) => {\n      if (!scrubberRef.current) return;\n      const scrubberRect = scrubberRef.current.getBoundingClientRect();\n      const percent = (event.clientX - scrubberRect.left) / scrubberRect.width;\n      setScrubTime(duration * percent);\n    },\n    [duration]\n  );\n\n  const seek = useCallback(\n    (event: MouseEvent) => {\n      if (!scrubberRef.current) return;\n      const scrubberRect = scrubberRef.current.getBoundingClientRect();\n      const percent = (event.clientX - scrubberRect.left) / scrubberRect.width;\n      onSeek(duration * percent);\n    },\n    [duration, onSeek]\n  );\n\n  return (\n    <StyledVideoControls over={true} active={active}>\n      <Box\n        direction=\"row\"\n        align=\"center\"\n        justify=\"between\"\n        background={{\n          color: \"background-back\",\n          opacity: \"strong\",\n          dark: true,\n        }}\n      >\n        <Button\n          icon={playing ? <Pause /> : <Play />}\n          hoverIndicator=\"background\"\n          onClick={playing ? onPause : onPlay}\n        />\n        <Box direction=\"row\" align=\"center\" flex>\n          <Box flex>\n            <Stack>\n              <Meter\n                size=\"full\"\n                thickness=\"small\"\n                values={[{ value: percentagePlayed || 0 }]}\n              />\n              <StyledVideoScrubber\n                ref={scrubberRef}\n                tabIndex={0}\n                role=\"button\"\n                value={\n                  scrubTime\n                    ? Math.round((scrubTime / duration) * 100)\n                    : undefined\n                }\n                onMouseMove={scrub}\n                onMouseLeave={() => setScrubTime(undefined)}\n                onClick={seek}\n              />\n            </Stack>\n          </Box>\n          <Box pad={{ horizontal: \"small\" }}>\n            <Text margin=\"none\">{formattedTime}</Text>\n          </Box>\n        </Box>\n        <PlayableSettingsMenu onVolumeChange={onVolumeChange} />\n      </Box>\n    </StyledVideoControls>\n  );\n};\n\nconst formatTime = (time: number) => {\n  let minutes: number | string = Math.round(time / 60);\n  if (minutes < 10) {\n    minutes = `0${minutes}`;\n  }\n  let seconds: number | string = Math.round(time) % 60;\n  if (seconds < 10) {\n    seconds = `0${seconds}`;\n  }\n  return `${minutes}:${seconds}`;\n};\n","import { Box, VideoProps } from \"grommet\";\nimport React, {\n  forwardRef,\n  MutableRefObject,\n  PropsWithChildren,\n  useCallback,\n  useEffect,\n  useLayoutEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport { PlayableControls } from \"./PlayableControls\";\n\nexport interface IPlayable {\n  onEnded?: () => void;\n  onPause?: () => void;\n  onPlay?: () => void;\n  onTimeUpdate?: () => void;\n  onDurationChange?: () => void;\n}\n\nconst useForwardedRef = <T extends any>(\n  ref: ((instance: T | null) => void) | MutableRefObject<T | null> | null\n) => {\n  const innerRef = useRef<T>(null);\n  useEffect(() => {\n    if (!ref) return;\n    if (typeof ref === \"function\") {\n      ref(innerRef.current);\n    } else {\n      // eslint-disable-next-line no-param-reassign\n      ref.current = innerRef.current;\n    }\n  });\n\n  return innerRef;\n};\n\ntype Props = {\n  mute?: boolean;\n  onEnded?: () => void;\n  onPause?: () => void;\n  onPlay?: () => void;\n  onTimeUpdate?: () => void;\n  onVolumeChange?: () => void;\n  playable: () => React.ForwardRefExoticComponent<\n    IPlayable & React.RefAttributes<HTMLVideoElement>\n  >;\n};\n\nconst Playable = forwardRef<\n  HTMLVideoElement,\n  PropsWithChildren<Props & VideoProps>\n>(({ playable, mute, onEnded, onPause, onPlay, onTimeUpdate }, ref) => {\n  const [currentTime, setCurrentTime] = useState<number>(0);\n  const [duration, setDuration] = useState<number>(0);\n  const [playing, setPlaying] = useState(false);\n  const [hasPlayed, setHasPlayed] = useState(false);\n  const [interacting, setInteracting] = useState(false);\n  const [height, setHeight] = useState<number>();\n  const [width, setWidth] = useState<number>();\n  const containerRef = useRef<HTMLDivElement>();\n  const videoRef = useForwardedRef(ref);\n\n  // mute if needed\n  useEffect(() => {\n    const video = videoRef.current;\n    if (video && mute) video.muted = true;\n  }, [mute, videoRef]);\n\n  // when the video is first rendered, set state from it where needed\n  useEffect(() => {\n    const video = videoRef.current;\n    if (!video) return;\n    setCurrentTime(video.currentTime);\n    setDuration(video.duration);\n  }, [videoRef]);\n\n  // turn off interacting after a while\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      if (!containerRef.current) return;\n      setInteracting(false);\n    }, 3000);\n    return () => clearTimeout(timer);\n  }, [interacting]);\n\n  useLayoutEffect(() => {\n    const video = videoRef.current;\n    if (!video) return;\n    if (video.videoHeight) {\n      // set the size based on the video aspect ratio\n      const rect = video.getBoundingClientRect();\n      const ratio = rect.width / rect.height;\n      const videoRatio = video.videoWidth / video.videoHeight;\n      if (videoRatio > ratio) {\n        const nextHeight = rect.width / videoRatio;\n        if (nextHeight !== height) {\n          setHeight(nextHeight);\n          setWidth(undefined);\n        }\n      } else {\n        const nextWidth = rect.height * videoRatio;\n        if (nextWidth !== width) {\n          setHeight(undefined);\n          setWidth(nextWidth);\n        }\n      }\n    }\n  }, [height, videoRef, width]);\n\n  const play = useCallback(() => videoRef.current?.play(), [videoRef]);\n  const pause = useCallback(() => videoRef.current?.pause(), [videoRef]);\n\n  const clamp = (value: number, min: number, max: number): number =>\n    Math.min(Math.max(min, value), max);\n\n  const changeVolume = (deltaVolume: number): void => {\n    if (!videoRef.current) return;\n    const requestedVolume = clamp(videoRef.current.volume + deltaVolume, 0, 1);\n\n    videoRef.current.volume = requestedVolume;\n  };\n\n  const PlayableChild = useMemo(() => playable(), [playable]);\n\n  return (\n    <Box\n      ref={containerRef as any}\n      onMouseEnter={() => setInteracting(true)}\n      onMouseMove={() => setInteracting(true)}\n      onTouchStart={() => setInteracting(true)}\n      style={{\n        flex: \"1 1\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        overflow: \"hidden\",\n        position: \"relative\",\n      }}\n    >\n      <PlayableChild\n        ref={videoRef}\n        onEnded={() => {\n          setPlaying(false);\n          if (onEnded) onEnded();\n        }}\n        onPause={() => {\n          setPlaying(false);\n          if (onPause) onPause();\n        }}\n        onPlay={() => {\n          setPlaying(true);\n          setHasPlayed(true);\n          if (onPlay) onPlay();\n        }}\n        onTimeUpdate={() => {\n          const video = videoRef.current;\n          if (!video) return;\n          setCurrentTime(video.currentTime);\n          if (onTimeUpdate) onTimeUpdate();\n        }}\n        onDurationChange={() => {\n          const video = videoRef.current;\n          if (!video) return;\n          setDuration(video.duration);\n        }}\n      />\n\n      <PlayableControls\n        onVolumeChange={changeVolume}\n        onSeek={(time) => {\n          if (!videoRef.current) return;\n          return (videoRef.current.currentTime = time);\n        }}\n        onPause={pause}\n        onPlay={() => {\n          return play();\n        }}\n        active={!hasPlayed || interacting}\n        playing={playing}\n        duration={duration}\n        currentTime={currentTime}\n      />\n    </Box>\n  );\n});\n\nexport { Playable };\n","export default __webpack_public_path__ + \"static/media/720p.40b0841d.mp4\";","import { Box, Stack, Text } from \"grommet\";\nimport { useEffect, useRef } from \"react\";\nimport { Playable } from \"../../components/playable/Playable\";\nimport { PlayableVideo } from \"../../components/playable/PlayableVideo\";\nimport { store, useStore } from \"../../store/store\";\nimport video from \"./../../720p.mp4\";\n\nexport const Chapter1 = ({ onFinished }: { onFinished: () => void }) => {\n  const ref = useRef<HTMLVideoElement>(null);\n  const setNextVideoToPlay = useStore((state) => state.setNextVideoToPlay);\n\n  useEffect(() => {\n    const video = ref.current;\n    if (video === null) return;\n    setNextVideoToPlay(video);\n\n    return () => {\n      if (store.getState().nextVideoToPlay === video) {\n        setNextVideoToPlay(undefined);\n      }\n    };\n  }, [ref, setNextVideoToPlay]);\n\n  return (\n    <>\n      <Stack fill interactiveChild=\"first\">\n        <Box fill>\n          <Playable\n            fit=\"cover\"\n            ref={ref}\n            playable={PlayableVideo([{ src: video, type: \"video/mp4\" }])}\n          ></Playable>\n        </Box>\n        <Box fill align=\"center\" justify=\"center\" alignSelf=\"center\">\n          <Text>Chapter1</Text>\n        </Box>\n      </Stack>\n      {/* <WebcamPermissions /> */}\n    </>\n  );\n};\n","import { StyledVideo } from \"grommet/components/Video/StyledVideo\";\nimport { forwardRef } from \"react\";\nimport { IPlayable } from \"./Playable\";\n\nexport const PlayableVideo = (sources: { src: string; type: string }[]) => () =>\n  forwardRef<HTMLVideoElement, IPlayable>(\n    ({ onEnded, onPause, onPlay, onTimeUpdate, onDurationChange }, ref) => {\n      return (\n        <StyledVideo\n          fit={\"contain\"}\n          ref={ref}\n          onEnded={onEnded}\n          onPause={onPause}\n          onPlay={onPlay}\n          onTimeUpdate={onTimeUpdate}\n          onDurationChange={onDurationChange}\n          autoPlay={false}\n          loop={false}\n        >\n          {sources.map(({ src, type }) => {\n            return <source key={src} src={src} type={type} />;\n          })}\n        </StyledVideo>\n      );\n    }\n  );\n\nexport const PlayableInteraction = () =>\n  forwardRef<HTMLVideoElement, IPlayable>(\n    ({ onEnded, onPause, onPlay, onTimeUpdate, onDurationChange }, ref) => {\n      return (\n        <StyledVideo\n          fit={\"contain\"}\n          ref={ref}\n          onEnded={onEnded}\n          onPause={onPause}\n          onPlay={onPlay}\n          onTimeUpdate={onTimeUpdate}\n          onDurationChange={onDurationChange}\n          autoPlay={false}\n          loop={false}\n        ></StyledVideo>\n      );\n    }\n  );\n","export default __webpack_public_path__ + \"static/media/1920x1080.f42afb0d.png\";","import { Box, Image, Stack, Text } from \"grommet\";\nimport image from \"../../1920x1080.png\";\nexport const Chapter2 = () => {\n  return (\n    <Stack>\n      <Box fill>\n        <Image fill src={image}></Image>\n      </Box>\n      <Text>Chapter 2</Text>\n    </Stack>\n  );\n};\n","import { Box, Stack, Text, Video } from \"grommet\";\nimport React from \"react\";\nimport video from \"./../../720p.mp4\";\n\nexport const Chapter3 = () => {\n  return (\n    <Stack interactiveChild=\"first\">\n      <Box fill>\n        <Video fit=\"contain\" controls={false} autoPlay muted>\n          <source src={video} type=\"video/mp4\" />\n        </Video>\n      </Box>\n      <Text>Chapter3</Text>\n    </Stack>\n  );\n};\n","import { Box, Stack, Text, Video } from \"grommet\";\nimport React from \"react\";\nimport video from \"./../../720p.mp4\";\n\nexport const Chapter4 = () => {\n  return (\n    <Stack interactiveChild=\"first\">\n      <Box fill>\n        <Video fit=\"contain\" controls={false} autoPlay muted>\n          <source src={video} type=\"video/mp4\" />\n        </Video>\n      </Box>\n      <Text>Chapter4</Text>\n    </Stack>\n  );\n};\n","import { Box, Stack, Text, Video } from \"grommet\";\nimport React from \"react\";\nimport video from \"./../../720p.mp4\";\n\nexport const Chapter5 = () => {\n  return (\n    <Stack interactiveChild=\"first\">\n      <Box fill>\n        <Video fit=\"contain\" controls={false} autoPlay muted>\n          <source src={video} type=\"video/mp4\" />\n        </Video>\n      </Box>\n      <Text>Chapter5</Text>\n    </Stack>\n  );\n};\n","import { Layer, Text } from \"grommet\";\nimport { useEffect, useState } from \"react\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport { chapterFlow, ChapterNumbers } from \"../../Routes\";\n\nexport const ChapterFinishCountDown = ({\n  chapterNumber,\n}: {\n  chapterNumber: ChapterNumbers;\n}) => {\n  const [secondsRemaining, setSecondsRemaining] = useState<number>(5);\n  const history = useHistory();\n\n  const isCover = new URLSearchParams(useLocation().search).has(\"isCover\");\n  const isChapter = new URLSearchParams(useLocation().search).has(\"isChapter\");\n\n  useEffect(() => {\n    const onSecond = () => {\n      setSecondsRemaining((seconds) => seconds - 1);\n    };\n    let timer: NodeJS.Timeout | undefined;\n    if (secondsRemaining > 0) {\n      timer = setTimeout(onSecond, 1000);\n    } else {\n      if (!isCover && !isChapter) {\n        history.push(`/chapter/${chapterNumber}?isCover`);\n      }\n\n      if (isCover) {\n        const url = `/chapter/${chapterNumber}?isCover` as const;\n        history.push(chapterFlow[url].next);\n      } else {\n        const url = `/chapter/${chapterNumber}?isChapter` as const;\n        history.push(chapterFlow[url].next);\n      }\n    }\n\n    return () => timer && clearInterval(timer);\n  }, [chapterNumber, history, isChapter, isCover, secondsRemaining]);\n\n  useEffect(() => {});\n\n  return (\n    <Layer position=\"center\" modal={false} responsive={false}>\n      <Text size=\"large\">Going to the next page in: {secondsRemaining}</Text>\n    </Layer>\n  );\n};\n","import { Box } from \"grommet\";\nimport React, { useEffect, useState } from \"react\";\nimport { ChapterNumbers } from \"../../Routes\";\nimport { Chapter1 } from \"./Chapter1\";\nimport { Chapter2 } from \"./Chapter2\";\nimport { Chapter3 } from \"./Chapter3\";\nimport { Chapter4 } from \"./Chapter4\";\nimport { Chapter5 } from \"./Chapter5\";\nimport { ChapterFinishCountDown } from \"./ChapterFinishCountDown\";\n\nexport const Chapters = ({\n  chapterNumber,\n}: {\n  chapterNumber: ChapterNumbers;\n}) => {\n  const dimensions = use169Dimensions();\n\n  const [isChapterFinished, setChapterFinished] = useState(false);\n\n  return (\n    <Box fill background=\"black\" justify=\"center\">\n      {isChapterFinished && (\n        <ChapterFinishCountDown chapterNumber={chapterNumber} />\n      )}\n      <Box\n        alignContent=\"center\"\n        height={dimensions.height + \"px\"}\n        width={dimensions.width + \"px\"}\n        background=\"grey\"\n        justify=\"center\"\n        alignSelf=\"center\"\n        align=\"center\"\n      >\n        {chapterNumber === \"1\" && (\n          <Chapter1 onFinished={() => setChapterFinished(true)} />\n        )}\n        {chapterNumber === \"2\" && <Chapter2 />}\n        {chapterNumber === \"3\" && <Chapter3 />}\n        {chapterNumber === \"4\" && <Chapter4 />}\n        {chapterNumber === \"5\" && <Chapter5 />}\n      </Box>\n    </Box>\n  );\n};\n\nconst useWindowDimensions = () => {\n  const [dimensions, setSize] = useState({\n    width: window.innerWidth,\n    height: window.innerHeight,\n  });\n  useEffect(() => {\n    const onResize = () => {\n      setSize({ width: window.innerWidth, height: window.innerHeight });\n    };\n    window.addEventListener(\"resize\", onResize);\n\n    return () => window.removeEventListener(\"resize\", onResize);\n  });\n\n  return dimensions;\n};\n\nconst use169Dimensions = () => {\n  const dimensions = useWindowDimensions();\n  const pageWidth = dimensions.width;\n  const pageHeight = dimensions.height;\n\n  const heightAt16by9 = (pageWidth / 16) * 9;\n  const widthAt16by9 = (pageHeight / 9) * 16;\n\n  let width;\n  let height;\n  // Use height to check if at this height, the page would be too wide\n  if (widthAt16by9 > pageWidth) {\n    width = pageWidth;\n    height = heightAt16by9;\n  } else {\n    width = widthAt16by9;\n    height = pageHeight;\n  }\n\n  return { width, height };\n};\n","import { Box, Layer } from \"grommet\";\nimport { Launch, Rewind } from \"grommet-icons\";\nimport { useHistory } from \"react-router-dom\";\nimport { ProgressIndicator } from \"../../components/ProgressIndicator\";\nimport { RoutedButton } from \"../../components/RoutedAnchor\";\nimport { chapterFlow, ChapterNumbers } from \"../../Routes\";\nimport { store } from \"../../store/store\";\n\nexport const CoverButtons = ({\n  chapterNumber,\n}: {\n  chapterNumber: ChapterNumbers;\n}) => {\n  const url = `/chapter/${chapterNumber}?isCover` as const;\n  const history = useHistory();\n\n  return (\n    <Layer\n      full=\"horizontal\"\n      modal={false}\n      position=\"bottom\"\n      responsive={false}\n      plain\n    >\n      <Box\n        alignSelf=\"center\"\n        direction=\"row\"\n        background=\"grey\"\n        margin={{ bottom: \"small\" }}\n      >\n        <RoutedButton\n          icon={<Launch />}\n          href={chapterFlow[url].next}\n          onClick={() => {\n            store.getState().nextVideoToPlay?.play();\n            history.push(chapterFlow[url].next);\n          }}\n        />\n        <RoutedButton icon={<Rewind />} href={chapterFlow[url].previous} />\n      </Box>\n      <ProgressIndicator />\n    </Layer>\n  );\n};\n","import { useEffect, useRef } from \"react\";\n\nexport const Cover1 = () => {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const contextRef = useRef<CanvasRenderingContext2D>();\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    const maybeContext = canvas.getContext(\"2d\");\n    if (!maybeContext) return;\n    contextRef.current = maybeContext;\n  }, []);\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    const paint = (pointerX: number, pointerY: number) => {\n      const context = contextRef.current;\n      if (!context) return;\n\n      requestAnimationFrame(() => {\n        for (let x = pointerX - 10; x < pointerX + 10; x++) {\n          for (let y = pointerY - 10; y < pointerY + 10; y++) {\n            context.fillStyle = `hsl(${\n              (x * Math.sin(Date.now() / 10000)) % 255\n            }, 100%, 50%)`;\n            context.beginPath();\n\n            context.ellipse(x, y, 10, 10, 0, 0, 2 * Math.PI);\n            context.fill();\n          }\n        }\n      });\n    };\n    const onMouseMove = (event: MouseEvent): void => {\n      if (!canvasRef.current) return;\n      const { relativeX, relativeY } = getRelativeClickPosition(event);\n\n      const x = relativeX * canvasRef.current?.width;\n      const y = relativeY * canvasRef.current?.height;\n      if (x !== undefined && y !== undefined) {\n        paint(x, y);\n      }\n    };\n    canvas.addEventListener(\"mousemove\", onMouseMove);\n\n    const onTouchMove = (event: TouchEvent): void => {\n      if (!canvasRef.current) return;\n      const { relativeX, relativeY } = getRelativeTouchPosition(event);\n\n      const x = relativeX * canvasRef.current.width;\n      const y = relativeY * canvasRef.current.height;\n      if (x !== undefined && y !== undefined) {\n        paint(x, y);\n      }\n    };\n    canvas.addEventListener(\"touchmove\", onTouchMove);\n\n    const onWindowResize = () => {\n      canvas.width = window.innerWidth;\n      canvas.height = window.innerHeight;\n    };\n    window.addEventListener(\"resize\", onWindowResize);\n\n    return () => {\n      canvas.removeEventListener(\"touchmove\", onTouchMove);\n      canvas.removeEventListener(\"mousemove\", onMouseMove);\n      window.removeEventListener(\"resize\", onWindowResize);\n    };\n  }, []);\n\n  return (\n    <canvas\n      style={{ width: \"100%\", height: \"100%\" }}\n      width={window.innerWidth}\n      height={window.innerHeight}\n      ref={canvasRef}\n    ></canvas>\n  );\n};\n\nfunction getRelativeTouchPosition(\n  event: TouchEvent\n): { relativeX: number; relativeY: number } {\n  const screenX = event.changedTouches[0].clientX;\n  const screenY = event.changedTouches[0].clientY;\n  const rect = (event.target as HTMLElement).getBoundingClientRect();\n\n  const clip = (value: number, min: number, max: number) =>\n    Math.min(max, Math.max(value, min));\n\n  const clippedX = clip(screenX - rect.left, 0, rect.width - 1);\n  const clippedY = clip(screenY - rect.top, 0, rect.height - 1);\n\n  const relativeX = clippedX / rect.width;\n  const relativeY = clippedY / rect.height;\n  return { relativeX: relativeX, relativeY: relativeY };\n}\n\nfunction getRelativeClickPosition(\n  event: MouseEvent\n): { relativeX: number; relativeY: number } {\n  const screenX = event.clientX;\n  const screenY = event.clientY;\n  const rect = (event.target as HTMLElement).getBoundingClientRect();\n\n  const clip = (value: number, min: number, max: number) =>\n    Math.min(max, Math.max(value, min));\n\n  const clippedX = clip(screenX - rect.left, 0, rect.width - 1);\n  const clippedY = clip(screenY - rect.top, 0, rect.height - 1);\n\n  const relativeX = clippedX / rect.width;\n  const relativeY = clippedY / rect.height;\n  return { relativeX: relativeX, relativeY: relativeY };\n}\n","import { Box, ResponsiveContext, Text } from \"grommet\";\nimport React, { ReactNode, useContext } from \"react\";\nimport { colorTheme } from \"../../../components/colorTheme\";\nimport { QueryButton, RoutedButton } from \"../../../components/RoutedAnchor\";\nimport { Routes } from \"../../../Routes\";\n\nexport const CustomRoutedButton = ({\n  color,\n  textContent,\n  href,\n}: {\n  color: keyof typeof colorTheme;\n  textContent: ReactNode;\n  href: Routes;\n}) => {\n  const size = useContext(ResponsiveContext) as\n    | \"small\"\n    | \"medium\"\n    | \"large\"\n    | \"xlarge\";\n\n  return (\n    <Box className=\"custom button\" direction=\"row\">\n      <RoutedButton\n        plain\n        label={\n          <Box\n            border={{ color, style: \"solid\", size: \"3px\" }}\n            pad={{ horizontal: \"27px\", vertical: \"7px\" }}\n          >\n            <Text size={size === \"small\" ? \"small\" : \"medium\"} color={color}>\n              {textContent}\n            </Text>\n          </Box>\n        }\n        href={href}\n      />\n    </Box>\n  );\n};\n\nexport const CustomQueryButton = ({\n  color,\n  textContent,\n  query,\n}: {\n  color: keyof typeof colorTheme;\n  textContent: ReactNode;\n  query: {\n    key: \"modal\";\n    value: \"about\" | \"privacy\" | \"credits\";\n    operation: \"open\" | \"close\";\n  };\n}) => {\n  const size = useContext(ResponsiveContext) as\n    | \"small\"\n    | \"medium\"\n    | \"large\"\n    | \"xlarge\";\n\n  return (\n    <QueryButton\n      query={query}\n      plain\n      label={\n        <Box className=\"custom button\" direction=\"row\">\n          <Box\n            border={{ color, style: \"solid\", size: \"3px\" }}\n            pad={{ horizontal: \"27px\", vertical: \"7px\" }}\n          >\n            <Text size={size === \"small\" ? \"small\" : \"medium\"} color={color}>\n              {textContent}\n            </Text>\n          </Box>\n        </Box>\n      }\n    />\n  );\n};\n","import { Box, Button, Layer, Text } from \"grommet\";\nimport { useCallback, useState } from \"react\";\nimport { CustomQueryButton } from \"../pages/plain/home/CustomButton\";\nimport { useStore } from \"../store/store\";\n\nexport const WebcamPermissions = () => {\n  const storeMediaStream = useStore((state) => state.webcamStream);\n  const setWebcamStream = useStore((state) => state.setWebcamStream);\n\n  const [error, setError] = useState<undefined | WebcamFailureReason>();\n\n  let uiState;\n  if (storeMediaStream === \"DISCONNECTED\") {\n    uiState = \"DISCONNECTED\";\n  }\n\n  if (storeMediaStream === \"NOT_USED\") {\n    uiState = \"NOT_USED\";\n  }\n\n  if (storeMediaStream === undefined && error === undefined) {\n    uiState = \"PERMISSION\";\n  }\n\n  if (storeMediaStream === undefined && error !== undefined) {\n    uiState = \"ERROR\";\n  }\n\n  if (storeMediaStream instanceof MediaStream) {\n    uiState = \"CONNECTED\";\n  }\n\n  const connectWebcam = useCallback(async () => {\n    const maybeStream = await getVideoStream();\n    if (typeof maybeStream === \"string\") {\n      setError(maybeStream);\n    } else {\n      setWebcamStream(maybeStream);\n      setError(undefined);\n      maybeStream.getTracks().forEach((track) => {\n        track.addEventListener(\"ended\", () => {\n          setWebcamStream(\"DISCONNECTED\");\n        });\n      });\n    }\n  }, [setWebcamStream]);\n\n  const PermissionsWindow = () => (\n    <Box gap=\"small\">\n      <Text alignSelf=\"center\">Grant permission to use webcam?</Text>\n      <Box direction=\"row\" gap=\"small\">\n        <Button\n          primary\n          label={\"Accept\"}\n          onClick={async () => {\n            connectWebcam();\n          }}\n        />\n        <Button\n          label={\"Decline & Proceed\"}\n          onClick={() => setWebcamStream(\"NOT_USED\")}\n        />\n        <CustomQueryButton\n          color=\"red\"\n          query={{ key: \"modal\", operation: \"open\", value: \"privacy\" }}\n          textContent={\"Check privacy policy\"}\n        />\n      </Box>\n    </Box>\n  );\n\n  const DisconnectedWindow = () => (\n    <Box gap=\"small\">\n      <Text alignSelf=\"center\">Webcam disconnected unexpectedly.</Text>\n      <Box direction=\"row\" gap=\"small\">\n        <Button\n          primary\n          label={\"Try Again?\"}\n          onClick={async () => {\n            connectWebcam();\n          }}\n        />\n        <Button\n          label={\"Decline & Proceed\"}\n          onClick={() => setWebcamStream(\"NOT_USED\")}\n        />\n        <CustomQueryButton\n          color=\"red\"\n          query={{ key: \"modal\", operation: \"open\", value: \"privacy\" }}\n          textContent={\"Check privacy policy\"}\n        />\n      </Box>\n    </Box>\n  );\n\n  const ErrorWindow = () => {\n    return (\n      <Box gap=\"small\">\n        <Text alignSelf=\"center\">\n          There was an error connecting the webcam.\n        </Text>\n        <Box alignSelf=\"center\">\n          <Text>\n            Error:{\" \"}\n            {error === \"GENERAL_ERROR\"\n              ? \"Could not connect to webcam\"\n              : \"Sorry, something went wrong on our side\"}\n          </Text>\n        </Box>\n        <Box direction=\"row\" gap=\"small\">\n          <Button\n            primary\n            label={\"Try Again?\"}\n            onClick={async () => {\n              connectWebcam();\n            }}\n          />\n          <Button\n            label={\"Decline & Proceed\"}\n            onClick={() => setWebcamStream(\"NOT_USED\")}\n          />\n          <CustomQueryButton\n            color=\"red\"\n            query={{ key: \"modal\", operation: \"open\", value: \"privacy\" }}\n            textContent={\"Check privacy policy\"}\n          />\n        </Box>\n      </Box>\n    );\n  };\n\n  const isShown =\n    uiState === \"DISCONNECTED\" ||\n    uiState === \"PERMISSION\" ||\n    uiState === \"ERROR\";\n\n  return (\n    <>\n      {isShown && (\n        <Layer modal responsive={false} position={\"center\"}>\n          <Box gap=\"small\">\n            {uiState === \"PERMISSION\" && <PermissionsWindow />}\n            {uiState === \"DISCONNECTED\" && <DisconnectedWindow />}\n            {uiState === \"ERROR\" && <ErrorWindow />}\n          </Box>\n        </Layer>\n      )}\n    </>\n  );\n};\n\ntype WebcamFailureReason = \"GENERAL_ERROR\" | \"SECURITY\";\n\nasync function getVideoStream(): Promise<MediaStream | WebcamFailureReason> {\n  try {\n    if (navigator.mediaDevices === undefined)\n      throw new DOMException(\"Page is not HTTPS\", \"NotAllowedError\");\n\n    const stream = await navigator.mediaDevices.getUserMedia({\n      video: { width: 1280, height: 720, facingMode: \"user\" },\n      audio: false,\n    });\n    return stream;\n  } catch (error: DOMException | unknown) {\n    if (\n      !(error instanceof DOMException) &&\n      !(error instanceof MediaStreamError)\n    )\n      throw error;\n\n    // These error names are from https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia\n    switch (error.name) {\n      case \"AbortError\":\n        return \"GENERAL_ERROR\";\n\n      case \"NotAllowedError\":\n        return \"SECURITY\";\n\n      case \"NotFoundError\":\n        return \"GENERAL_ERROR\";\n\n      case \"NotReadableError\":\n        return \"GENERAL_ERROR\";\n\n      case \"OverconstrainedError\":\n        throw error;\n      case \"SecurityError\":\n        return \"SECURITY\";\n\n      case \"TypeError\":\n        throw error;\n\n      default:\n        throw error;\n    }\n  }\n}\n","import { useRef, useCallback, useEffect } from \"react\";\n\nexport const useAnimationFrame = (\n  frameRate: number,\n  callback: (deltaTime: number) => void\n): void => {\n  const requestRef = useRef<number>();\n  const previousTimeRef = useRef<number>();\n\n  const animate = useCallback(\n    (time: number) => {\n      if (previousTimeRef.current !== undefined) {\n        const deltaTime = time - previousTimeRef.current;\n        callback(deltaTime);\n      }\n      previousTimeRef.current = time;\n    },\n    [callback]\n  );\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      requestRef.current = requestAnimationFrame(animate);\n    }, 1000 / frameRate);\n    return () => {\n      requestRef.current && cancelAnimationFrame(requestRef.current);\n      interval && clearInterval(interval);\n    };\n  }, [animate, frameRate]);\n};\n\nexport const useOverrideAnimationFrame = (\n  frameRate: number,\n  callback: (deltaTime: number) => Promise<void>\n): void => {\n  const isProcessing = useRef(false);\n\n  useAnimationFrame(frameRate, async (deltaTime) => {\n    if (isProcessing.current === true) {\n      return;\n    }\n    isProcessing.current = true;\n    callback(deltaTime).finally(() => {\n      isProcessing.current = false;\n    });\n  });\n};\n","export type PartGroups =\n  | \"LEFT_EYE\"\n  | \"RIGHT_EYE\"\n  | \"MOUTH\"\n  | \"NOSE\"\n  | \"FACE_PLANE\"\n  | \"NOSE_TIP\"\n  | \"SILHOUETTE\";\n\nconst MESH_ANNOTATIONS = {\n  silhouette: [\n    10,\n    338,\n    297,\n    332,\n    284,\n    251,\n    389,\n    356,\n    454,\n    323,\n    361,\n    288,\n    397,\n    365,\n    379,\n    378,\n    400,\n    377,\n    152,\n    148,\n    176,\n    149,\n    150,\n    136,\n    172,\n    58,\n    132,\n    93,\n    234,\n    127,\n    162,\n    21,\n    54,\n    103,\n    67,\n    109,\n  ],\n\n  lipsUpperOuter: [61, 185, 40, 39, 37, 0, 267, 269, 270, 409, 291],\n  lipsLowerOuter: [146, 91, 181, 84, 17, 314, 405, 321, 375, 291],\n  lipsUpperInner: [78, 191, 80, 81, 82, 13, 312, 311, 310, 415, 308],\n  lipsLowerInner: [78, 95, 88, 178, 87, 14, 317, 402, 318, 324, 308],\n\n  rightEyeUpper0: [246, 161, 160, 159, 158, 157, 173],\n  rightEyeLower0: [33, 7, 163, 144, 145, 153, 154, 155, 133],\n  rightEyeUpper1: [247, 30, 29, 27, 28, 56, 190],\n  rightEyeLower1: [130, 25, 110, 24, 23, 22, 26, 112, 243],\n  rightEyeUpper2: [113, 225, 224, 223, 222, 221, 189],\n  rightEyeLower2: [226, 31, 228, 229, 230, 231, 232, 233, 244],\n  rightEyeLower3: [143, 111, 117, 118, 119, 120, 121, 128, 245],\n\n  rightEyebrowUpper: [156, 70, 63, 105, 66, 107, 55, 193],\n  rightEyebrowLower: [35, 124, 46, 53, 52, 65],\n\n  // rightEyeIris: [473, 474, 475, 476, 477],\n  // leftEyeIris: [468, 469, 470, 471, 472],\n\n  leftEyeUpper0: [466, 388, 387, 386, 385, 384, 398],\n  leftEyeLower0: [263, 249, 390, 373, 374, 380, 381, 382, 362],\n  leftEyeUpper1: [467, 260, 259, 257, 258, 286, 414],\n  leftEyeLower1: [359, 255, 339, 254, 253, 252, 256, 341, 463],\n  leftEyeUpper2: [342, 445, 444, 443, 442, 441, 413],\n  leftEyeLower2: [446, 261, 448, 449, 450, 451, 452, 453, 464],\n  leftEyeLower3: [372, 340, 346, 347, 348, 349, 350, 357, 465],\n\n  leftEyebrowUpper: [383, 300, 293, 334, 296, 336, 285, 417],\n  leftEyebrowLower: [265, 353, 276, 283, 282, 295],\n\n  midwayBetweenEyes: [168],\n\n  noseTip: [1],\n  noseBottom: [2],\n  noseRightCorner: [98],\n  noseLeftCorner: [327],\n\n  rightCheek: [205],\n  leftCheek: [425],\n};\n\nconst leftEyeParts: (keyof typeof MESH_ANNOTATIONS)[] = [\n  \"leftEyeUpper0\",\n  \"leftEyeLower0\",\n  \"leftEyeUpper1\",\n  \"leftEyeLower1\",\n  \"leftEyeUpper2\",\n  \"leftEyeLower2\",\n  \"leftEyeLower3\",\n  \"leftEyebrowUpper\",\n  \"leftEyebrowLower\",\n];\n\nconst leftEyeIndices = leftEyeParts\n  .map((part) => MESH_ANNOTATIONS[part])\n  .flat();\n\nconst rightEyeParts: (keyof typeof MESH_ANNOTATIONS)[] = [\n  \"rightEyeUpper0\",\n  \"rightEyeLower0\",\n  \"rightEyeUpper1\",\n  \"rightEyeLower1\",\n  \"rightEyeUpper2\",\n  \"rightEyeLower2\",\n  \"rightEyeLower3\",\n  \"rightEyebrowUpper\",\n  \"rightEyebrowLower\",\n];\n\nconst rightEyeIndices = rightEyeParts\n  .map((part) => MESH_ANNOTATIONS[part])\n  .flat();\n\nconst mouthParts: (keyof typeof MESH_ANNOTATIONS)[] = [\n  \"lipsUpperOuter\",\n  \"lipsLowerOuter\",\n  \"lipsUpperInner\",\n  \"lipsLowerInner\",\n];\n\nconst mouthIndices = mouthParts.map((part) => MESH_ANNOTATIONS[part]).flat();\n\nconst noseParts: (keyof typeof MESH_ANNOTATIONS)[] = [\n  \"noseTip\",\n  \"noseBottom\",\n  \"noseRightCorner\",\n  \"noseLeftCorner\",\n  \"midwayBetweenEyes\",\n];\n\nconst noseIndices = noseParts.map((part) => MESH_ANNOTATIONS[part]).flat();\n\nconst facePlaneParts: (keyof typeof MESH_ANNOTATIONS)[] = [\n  \"midwayBetweenEyes\",\n  \"leftCheek\",\n  \"rightCheek\",\n];\n\nconst facePlaneIndicies = facePlaneParts\n  .map((part) => MESH_ANNOTATIONS[part])\n  .flat();\n\nconst noseTip: (keyof typeof MESH_ANNOTATIONS)[] = [\"noseTip\"];\n\nconst noseTipIndicies = noseTip.map((part) => MESH_ANNOTATIONS[part]).flat();\n\nexport const PART_GROUPS: { [key in PartGroups]: number[] } = {\n  LEFT_EYE: leftEyeIndices,\n  RIGHT_EYE: rightEyeIndices,\n  MOUTH: mouthIndices,\n  NOSE: noseIndices,\n  FACE_PLANE: facePlaneIndicies,\n  NOSE_TIP: noseTipIndicies,\n  SILHOUETTE: MESH_ANNOTATIONS.silhouette,\n} as const;\n\nexport const KEY_AREA_GROUPS = {\n  LEFT_EYE: PART_GROUPS[\"LEFT_EYE\"],\n  RIGHT_EYE: PART_GROUPS[\"RIGHT_EYE\"],\n  MOUTH: PART_GROUPS[\"MOUTH\"],\n  NOSE: PART_GROUPS[\"NOSE\"],\n  SILHOUETTE: PART_GROUPS[\"SILHOUETTE\"],\n} as const;\n","import {\n  Coord2D,\n  Coords3D,\n} from \"@tensorflow-models/face-landmarks-detection/dist/mediapipe-facemesh/util\";\nimport { MutableRefObject, ReactElement, useRef } from \"react\";\nimport { Canvas, CanvasContext, useFrame, Viewport } from \"react-three-fiber\";\nimport { BufferAttribute, Color, Mesh, Vector3 } from \"three\";\nimport { useAnimationFrame } from \"../../hooks/useAnimationFrame\";\nimport { PartGroups, PART_GROUPS } from \"./part-groups\";\nimport { BoundingBox, IKeyPoints, KeyPoints } from \"./VideoDetector\";\n\nexport const FaceTracker = ({\n  keyPoints,\n}: {\n  keyPoints: { current: IKeyPoints | undefined };\n}): ReactElement => {\n  const keyPoints2 = useRef<KeyPoints<HTMLVideoElement>>();\n  const ref = useRef<CanvasContext>();\n\n  useAnimationFrame(60, () => {\n    const maybeContext = ref.current;\n    if (!maybeContext) return;\n    if (!keyPoints.current) return;\n    const result = setNormalizedMesh(keyPoints.current, maybeContext);\n    keyPoints2.current = result;\n  });\n\n  return (\n    <Canvas\n      style={{\n        width: \"100%\",\n        zIndex: 10,\n      }}\n      orthographic={true}\n      pixelRatio={window.devicePixelRatio}\n      webgl1={true}\n      camera={{ near: -10000, far: 10000 }}\n      noEvents={true}\n      onPointerMove={undefined}\n      onMouseMove={undefined}\n      onCreated={(context) => {\n        ref.current = context;\n      }}\n    >\n      {keyPoints2 && (\n        <VideoPartRenderer\n          keyPoints={keyPoints2}\n          parts={[\"FACE_PLANE\", \"LEFT_EYE\", \"RIGHT_EYE\", \"MOUTH\", \"NOSE\"]}\n        ></VideoPartRenderer>\n      )}\n    </Canvas>\n  );\n};\n\nfunction setNormalizedMesh(\n  {\n    source,\n    normalizedMesh,\n    aspect: sourceAspect,\n    normalizedBoundingBox,\n    scaledMesh,\n  }: IKeyPoints,\n  canvasContext: CanvasContext\n) {\n  const { viewport } = canvasContext;\n\n  const aspectCorrection = sourceAspect;\n  const mesh = getMesh(aspectCorrection, viewport, normalizedMesh);\n  const boundingBox = getBoundingBox(\n    aspectCorrection,\n    viewport,\n    normalizedBoundingBox\n  );\n\n  const parts = getParts(mesh);\n  const facePlane = getFacePlane(mesh);\n  const zRotation = getHeadZRotation(mesh);\n\n  const keyPoints: KeyPoints<HTMLVideoElement> = {\n    normalizedMesh,\n    sourceAspect,\n    mesh,\n    parts,\n    source,\n    facePlane: { ...facePlane, zRotation },\n    boundingBox,\n    scaledMesh,\n  };\n\n  return keyPoints;\n}\n\nfunction getBoundingBox(\n  aspectCorrection: number,\n  viewport: Viewport,\n  boundingBox: BoundingBox\n): BoundingBox {\n  const scalingDimension = Math.min(\n    viewport.width,\n    viewport.height * aspectCorrection\n  );\n\n  return {\n    topLeft: [\n      boundingBox.topLeft[0] * scalingDimension - scalingDimension / 2,\n      -(boundingBox.topLeft[1] * scalingDimension - scalingDimension / 2) /\n        aspectCorrection,\n    ],\n    bottomRight: [\n      boundingBox.bottomRight[0] * scalingDimension - scalingDimension / 2,\n      -(boundingBox.bottomRight[1] * scalingDimension - scalingDimension / 2) /\n        aspectCorrection,\n    ],\n  };\n}\n\nfunction getParts(mesh: Coords3D) {\n  const entries = Object.entries(PART_GROUPS).map(([part, indices]) => [\n    part,\n    mesh.filter((_, index) => indices.includes(index)),\n  ]);\n\n  const parts = Object.fromEntries(entries) as {\n    [key in PartGroups]: Coords3D;\n  };\n  return parts;\n}\n\nfunction getFacePlane(mesh: Coords3D) {\n  const facePlanePoints: Coords3D = PART_GROUPS.FACE_PLANE.map(\n    (index) => mesh[index]!\n  );\n\n  if (facePlanePoints.length !== 3) {\n    throw new Error(\"facePlanePoints should only contain three points\");\n  }\n\n  const facePlane = getPlaneFromPoints(\n    ...(facePlanePoints as [Coord3D, Coord3D, Coord3D])\n  );\n  return facePlane;\n}\ntype Coord3D = [number, number, number];\n\nfunction getMesh(\n  aspectCorrection: number,\n  viewport: Viewport,\n  normalizedMesh: Coords3D\n) {\n  const scalingDimension = Math.min(\n    viewport.width,\n    viewport.height * aspectCorrection\n  );\n\n  const mesh: Coords3D = normalizedMesh.map(([x, y, z]) => [\n    x * scalingDimension - scalingDimension / 2,\n    (y * scalingDimension + scalingDimension / 2) / aspectCorrection,\n    z * scalingDimension + scalingDimension / 2,\n  ]);\n  return mesh;\n}\n\nconst getPlaneFromPoints = (\n  pointA: Coord3D,\n  pointB: Coord3D,\n  pointC: Coord3D\n): { normal: Coord3D; offset: number } => {\n  const A = new Vector3().fromArray(pointA);\n  const B = new Vector3().fromArray(pointB);\n  const C = new Vector3().fromArray(pointC);\n  const AB = B.clone().sub(A);\n  const AC = C.clone().sub(A);\n\n  const normal = AB.clone().cross(AC);\n  const offset = (normal.x * A.x, normal.y * A.y, normal.z * A.z);\n\n  return { normal: normal.toArray() as Coord3D, offset };\n};\n\nfunction getHeadZRotation(mesh: Coords3D) {\n  const facePlanePoints: Coords3D = PART_GROUPS.FACE_PLANE.map(\n    (index) => mesh[index]!\n  );\n\n  if (facePlanePoints.length !== 3) {\n    throw new Error(\"facePlanePoints should only contain three points\");\n  }\n\n  const [, leftCheek, rightCheeck] = facePlanePoints as [\n    Coord3D,\n    Coord3D,\n    Coord3D\n  ];\n\n  const distance = [\n    rightCheeck[0] - leftCheek[0],\n    rightCheeck[1] - leftCheek[1],\n  ] as Coord2D;\n  const angle = -Math.atan2(distance[1], distance[0]);\n  return angle;\n}\n\nconst VideoPartRenderer = ({\n  parts,\n  color = \"magenta\",\n  keyPoints,\n}: {\n  parts: PartGroups[];\n  color?: string | number | Color | undefined;\n  keyPoints: MutableRefObject<KeyPoints<HTMLVideoElement> | undefined>;\n}): React.ReactElement => {\n  const ref = useRef<Mesh>();\n  const maxPoints = parts.map((part) => PART_GROUPS[part]).flat().length;\n\n  useFrame(() => {\n    const geometry = ref.current?.geometry;\n    const partsInStore = keyPoints.current?.parts;\n    if (partsInStore === undefined) return;\n    const mesh = parts.map((part) => partsInStore[part]).flat(2);\n    if (geometry === undefined) return;\n\n    const attribute = geometry.getAttribute(\"position\") as BufferAttribute;\n    attribute.set(mesh, 0);\n    geometry.setDrawRange(0, maxPoints);\n    attribute.needsUpdate = true;\n  });\n\n  return (\n    <points ref={ref} key={parts.toString()}>\n      <bufferGeometry drawRange={{ start: 0, count: 0 }}>\n        <bufferAttribute\n          attachObject={[\"attributes\", \"position\"]}\n          itemSize={3}\n          array={new Float32Array(maxPoints * 3)}\n          count={maxPoints}\n        />\n      </bufferGeometry>\n      <pointsMaterial color={color} size={10} />\n    </points>\n  );\n};\n","import * as faceLandmarksDetection from \"@tensorflow-models/face-landmarks-detection\";\nimport {\n  AnnotatedPrediction,\n  MediaPipeFaceMesh,\n} from \"@tensorflow-models/face-landmarks-detection/dist/mediapipe-facemesh\";\nimport {\n  Coord2D,\n  Coords3D,\n} from \"@tensorflow-models/face-landmarks-detection/dist/mediapipe-facemesh/util\";\nimport \"@tensorflow/tfjs-backend-cpu\";\nimport \"@tensorflow/tfjs-backend-webgl\";\nimport { Video } from \"grommet\";\nimport {\n  forwardRef,\n  MutableRefObject,\n  ReactElement,\n  useEffect,\n  useRef,\n} from \"react\";\nimport { useOverrideAnimationFrame } from \"../../hooks/useAnimationFrame\";\nimport { useForwardedRef } from \"../../hooks/useForwardedRef\";\n\nexport const VideoDetector = forwardRef<\n  HTMLVideoElement,\n  {\n    stream: MediaStream;\n    results: MutableRefObject<IKeyPoints | undefined>;\n  }\n>(\n  ({ stream, results }, ref): ReactElement => {\n    const videoRef = useForwardedRef(ref);\n    const hasLoadedData = useRef(false);\n\n    useEffect(() => {\n      const video = videoRef.current;\n      if (!video) return;\n      video.srcObject = stream;\n      video.play();\n      video.addEventListener(\"loadeddata\", () => {\n        hasLoadedData.current = true;\n      });\n    }, [stream, videoRef]);\n\n    useEffect(() => {\n      const main = async () => {\n        const video = videoRef.current;\n        if (video === null || hasLoadedData.current === false) return;\n        video.width = stream.getTracks()[0]!.getSettings().width!;\n        video.height = stream.getTracks()[0]!.getSettings().height!;\n        const keyPoints = await getKeyPoints(video);\n\n        if (keyPoints) results.current = keyPoints;\n      };\n\n      main();\n    }, [results, stream, videoRef]);\n\n    useOverrideAnimationFrame(25, async () => {\n      const main = async () => {\n        const video = videoRef.current;\n        if (video === null || hasLoadedData.current === false) return;\n        video.width = stream.getTracks()[0]!.getSettings().width!;\n        video.height = stream.getTracks()[0]!.getSettings().height!;\n\n        const keyPoints = await getKeyPoints(video);\n        if (keyPoints) results.current = keyPoints;\n      };\n\n      main();\n    });\n    return <Video width=\"100%\" fit=\"cover\" ref={videoRef as any}></Video>;\n  }\n);\n\ninterface PartLocations {\n  LEFT_EYE: Coords3D;\n  RIGHT_EYE: Coords3D;\n  MOUTH: Coords3D;\n  NOSE: Coords3D;\n  FACE_PLANE: Coords3D;\n  NOSE_TIP: Coords3D;\n  SILHOUETTE: Coords3D;\n}\n\ninterface PlaneDescriptor {\n  normal: Coord3D;\n  offset: number;\n  zRotation: number;\n}\n\nexport interface KeyPoints<T extends HTMLImageElement | HTMLVideoElement> {\n  source: T;\n  parts: PartLocations;\n  mesh: Coords3D;\n  scaledMesh: Coords3D;\n  normalizedMesh: Coords3D;\n  sourceAspect: number;\n  facePlane: PlaneDescriptor;\n  boundingBox: BoundingBox;\n}\n\ntype Coord3D = [number, number, number];\n\nexport interface BoundingBox {\n  topLeft: Coord2D;\n  bottomRight: Coord2D;\n}\n\nexport interface IKeyPoints {\n  source: HTMLVideoElement;\n  faceInViewConfidence: number;\n  boundingBox: BoundingBox;\n  normalizedBoundingBox: BoundingBox;\n  mesh: Coords3D;\n  /** Facial landmark coordinates normalized to input dimensions. */\n  scaledMesh: Coords3D;\n  /** Facial landmark coordinates normalized to 0-1 */\n  normalizedMesh: Coords3D;\n  aspect: number;\n}\nlet model: MediaPipeFaceMesh | undefined = undefined;\nlet pendingPromise: Promise<MediaPipeFaceMesh> | undefined;\nasync function loadModelIfNeeded(model: MediaPipeFaceMesh | undefined) {\n  if (pendingPromise === undefined) {\n    const result = faceLandmarksDetection.load(\n      faceLandmarksDetection.SupportedPackages.mediapipeFacemesh,\n      { maxFaces: 1, shouldLoadIrisModel: false }\n    );\n    pendingPromise = result;\n  }\n  return await pendingPromise;\n}\n\nexport async function getKeyPoints(\n  input: HTMLVideoElement\n): Promise<IKeyPoints | undefined> {\n  model = await loadModelIfNeeded(model);\n\n  const predictions = await model.estimateFaces({\n    input,\n    returnTensors: false,\n    predictIrises: false,\n  });\n\n  const firstFacePrediction = predictions[0] as\n    | (AnnotatedPrediction & {\n        kind: \"MediaPipePredictionValues\";\n      })\n    | undefined;\n\n  if (firstFacePrediction === undefined) return undefined;\n\n  const inputDimensions = getInputDimensions(input);\n\n  const { scaledMesh } = firstFacePrediction;\n\n  const normalizedMesh: Coords3D = getNormalizedMesh(\n    scaledMesh,\n    inputDimensions\n  );\n\n  const normalizedBoundingBox = getNormalizedBoundingBox(\n    firstFacePrediction.boundingBox,\n    inputDimensions\n  );\n\n  const keyPoints: IKeyPoints = {\n    ...firstFacePrediction,\n    source: input,\n    normalizedMesh,\n    aspect: inputDimensions.aspect,\n    normalizedBoundingBox,\n  };\n\n  return keyPoints;\n}\nfunction getInputDimensions(input: HTMLVideoElement) {\n  return {\n    width: input.videoWidth,\n    height: input.videoHeight,\n    aspect: input.videoWidth / input.videoHeight,\n  };\n}\nfunction getNormalizedBoundingBox(\n  boundingBox: BoundingBox,\n  inputDimensions: { width: number; height: number }\n): BoundingBox {\n  return {\n    topLeft: [\n      boundingBox.topLeft[0] / inputDimensions.width,\n      boundingBox.topLeft[1] / inputDimensions.height,\n    ],\n    bottomRight: [\n      boundingBox.bottomRight[0] / inputDimensions.width,\n      boundingBox.bottomRight[1] / inputDimensions.height,\n    ],\n  };\n}\n\nfunction getNormalizedMesh(\n  scaledMesh: Coords3D,\n  inputDimensions: { width: number; height: number }\n): Coords3D {\n  const normalizedMesh: Coords3D = [];\n\n  for (let index = 0; index < scaledMesh.length; index++) {\n    const [x, y, z] = scaledMesh[index]!;\n    normalizedMesh.push([\n      x / inputDimensions.width,\n      -y / inputDimensions.height,\n      z / inputDimensions.width,\n    ]);\n  }\n\n  return normalizedMesh;\n}\n","import { MutableRefObject, useEffect, useRef } from \"react\";\n\nexport const useForwardedRef = <T extends any>(\n  ref: ((instance: T | null) => void) | MutableRefObject<T | null> | null\n) => {\n  const innerRef = useRef<T>(null);\n  useEffect(() => {\n    if (!ref) return;\n    if (typeof ref === \"function\") {\n      ref(innerRef.current);\n    } else {\n      // eslint-disable-next-line no-param-reassign\n      ref.current = innerRef.current;\n    }\n  });\n\n  return innerRef;\n};\n","import { Stack } from \"grommet\";\nimport React, { useRef } from \"react\";\nimport { WebcamPermissions } from \"../../components/WebcamPermissions\";\nimport { useStore } from \"../../store/store\";\nimport { FaceTracker } from \"./FaceTracker\";\nimport { IKeyPoints, VideoDetector } from \"./VideoDetector\";\n\nexport const Cover2 = () => {\n  const stream = useStore((state) => state.webcamStream);\n  const results = useRef<IKeyPoints>();\n\n  return (\n    <>\n      <Stack alignSelf=\"center\" guidingChild={\"last\"}>\n        <FaceTracker keyPoints={results} />\n        {stream instanceof MediaStream ? (\n          <VideoDetector stream={stream} results={results} />\n        ) : (\n          `  : Web camera not enabled`\n        )}\n      </Stack>\n      <WebcamPermissions />\n    </>\n  );\n};\n","import { Text } from \"grommet\";\n\nexport const Cover3 = () => {\n  return <Text>Chapter 3 Cover</Text>;\n};\n","import { Text } from \"grommet\";\n\nexport const Cover4 = () => {\n  return <Text>Chapter 4 Cover</Text>;\n};\n","import { Text } from \"grommet\";\n\nexport const Cover5 = () => {\n  return <Text>Chapter 5 Cover</Text>;\n};\n","import { Box } from \"grommet\";\nimport React, { useEffect } from \"react\";\nimport { ChapterNumbers } from \"../../Routes\";\nimport { useStore } from \"../../store/store\";\nimport { Cover1 } from \"./Cover1\";\nimport { Cover2 } from \"./Cover2\";\nimport { Cover3 } from \"./Cover3\";\nimport { Cover4 } from \"./Cover4\";\nimport { Cover5 } from \"./Cover5\";\n\nconst covers = [<Cover1 />, <Cover2 />, <Cover3 />, <Cover4 />, <Cover5 />];\n\nexport const Covers = ({\n  chapterNumber,\n}: {\n  chapterNumber: ChapterNumbers;\n}) => {\n  const coverIndex = parseInt(chapterNumber) - 1;\n\n  const nextVideoToPlay = useStore((state) => state.nextVideoToPlay);\n\n  useEffect(() => {\n    if (!nextVideoToPlay) return;\n    nextVideoToPlay.pause();\n    nextVideoToPlay.currentTime = 0;\n    nextVideoToPlay.load();\n  }, [nextVideoToPlay]);\n\n  const isValidCoverNumber = Number.isInteger(coverIndex);\n  if (isValidCoverNumber && covers[coverIndex] !== undefined) {\n    return (\n      <Box fill justify=\"center\" alignContent=\"center\">\n        {covers[coverIndex]}\n      </Box>\n    );\n  } else {\n    throw new Error(`Could not get chapter cover`);\n  }\n};\n","import { Box, Layer, Stack } from \"grommet\";\nimport {\n  Redirect,\n  Route,\n  Switch,\n  useHistory,\n  useLocation,\n} from \"react-router-dom\";\nimport { ChapterNumbers, chapterNumbers, ChapterRoutes } from \"../Routes\";\nimport { useStore } from \"../store/store\";\nimport { ChapterButtons } from \"./chapters/ChapterButtons\";\nimport { Chapters } from \"./chapters/Chapters\";\nimport { CoverButtons } from \"./covers/CoverButtons\";\nimport { Covers } from \"./covers/Covers\";\n\nexport const RouteChaptersAndCovers = () => {\n  return (\n    <>\n      <Switch>\n        {chapterNumbers.map((chapterNumber) => (\n          <Route path={`/chapter/${chapterNumber}`} key={chapterNumber}>\n            <ChaptersAndCovers\n              chapterNumber={chapterNumber}\n            ></ChaptersAndCovers>\n          </Route>\n        ))}\n        <Route>\n          <Redirect to=\"/error\" />;\n        </Route>\n      </Switch>\n    </>\n  );\n};\n\nconst ChaptersAndCovers = ({\n  chapterNumber,\n}: {\n  chapterNumber: ChapterNumbers;\n}) => {\n  const history = useHistory();\n  const isChapter = new URLSearchParams(useLocation().search).has(\"isChapter\");\n  const isCover = new URLSearchParams(useLocation().search).has(\"isCover\");\n\n  const isRecording = useStore(\n    (state) => state.webcamStream instanceof MediaStream\n  );\n\n  if (!isCover && !isChapter) {\n    history.push(`/chapter/${chapterNumber}?isCover` as ChapterRoutes);\n  }\n\n  return (\n    <>\n      <Layer modal={false} position=\"top-right\" responsive={false}>\n        <Stack>\n          <Box>📷</Box>\n          {!isRecording && <Box>❌</Box>}\n        </Stack>\n      </Layer>\n      <Box\n        fill\n        style={{ display: isChapter ? \"unset\" : \"none\" }}\n        className=\"MaybeHiddenChapter\"\n      >\n        <Chapters chapterNumber={chapterNumber} />\n        {isChapter && <ChapterButtons chapterNumber={chapterNumber} />}\n      </Box>\n\n      {!isChapter && (\n        <>\n          <Covers chapterNumber={chapterNumber} />\n          <CoverButtons chapterNumber={chapterNumber} />\n        </>\n      )}\n    </>\n  );\n};\n","import { Box, Heading,Paragraph } from \"grommet\";\nimport React from \"react\";\n\nexport const EndPage = () => {\n  return (\n    <Box>\n      <Heading>End Page</Heading>\n      <Paragraph fill>\n        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus\n        pretium finibus leo nec commodo. Vestibulum vestibulum eget lectus sit\n        amet rhoncus. Phasellus pretium nulla eget pellentesque fringilla. Nunc\n        turpis dolor, viverra a lectus nec, pellentesque commodo sapien. Proin\n        iaculis, arcu vitae aliquam eleifend, dolor tellus blandit urna, sit\n        amet luctus arcu nulla id elit. Nam nec lobortis orci. Duis nisi sapien,\n        dictum a tincidunt ut, luctus rhoncus lacus. Curabitur a lacus ante.\n        Praesent venenatis a arcu vel suscipit. Interdum et malesuada fames ac\n        ante ipsum primis in faucibus. Nullam nec felis et lectus faucibus\n        venenatis. Fusce quis bibendum nisi, sed condimentum turpis. Maecenas ut\n        congue lacus. Sed enim velit, finibus vel enim eget, lacinia consequat\n        neque. Suspendisse volutpat risus nibh, non scelerisque libero facilisis\n        sed.\n      </Paragraph>\n      <Paragraph fill>\n        Cras nibh sapien, consequat sed varius vitae, sagittis sed felis.\n        Pellentesque tincidunt justo lorem, sollicitudin varius quam malesuada\n        at. Duis eget sagittis ex, placerat aliquam nisi. Integer condimentum\n        eleifend leo, in sodales lectus sagittis consectetur. Etiam euismod, est\n        fringilla eleifend accumsan, enim ex auctor odio, et bibendum metus\n        tellus sed metus. Nulla ornare massa justo, ac feugiat velit efficitur\n        in. Sed consequat ultrices massa non iaculis. Aenean luctus, nulla eu\n        convallis porta, risus nunc fringilla nisl, vel sodales neque urna vitae\n        elit. Praesent dignissim aliquam suscipit. Fusce eu turpis nec magna\n        maximus dictum. Donec dapibus at magna sed suscipit. Aliquam malesuada,\n        lorem eget ultricies pellentesque, sapien sem ullamcorper ligula, non\n        ornare velit nulla ut eros.\n      </Paragraph>\n      <Paragraph fill>\n        Nulla in eros tincidunt, bibendum leo eu, lobortis justo. Donec et\n        tristique arcu. Duis nec semper turpis. In at lacinia nulla, et\n        imperdiet lectus. Donec sodales aliquet fringilla. Ut et mauris eros.\n        Fusce eget lacinia enim. Fusce posuere nec lacus at ullamcorper. Cras\n        imperdiet maximus consectetur.\n      </Paragraph>\n      <Paragraph fill>\n        Suspendisse in sapien varius, accumsan arcu sit amet, egestas quam. Ut\n        dapibus velit odio, a ultricies urna interdum sed. Maecenas in dapibus\n        sem, at euismod purus. Quisque semper nulla efficitur, sagittis sapien\n        quis, tincidunt felis. Fusce vel augue sed mauris maximus consectetur.\n        Fusce pellentesque in sem a dapibus. Vivamus pretium cursus tellus quis\n        commodo. In ultricies nisi quis viverra condimentum. Etiam id finibus\n        lacus, in tempus nunc. Sed sed nisl sem. Suspendisse ullamcorper id odio\n        eu volutpat.\n      </Paragraph>\n      <Paragraph fill>\n        Donec placerat neque a rhoncus molestie. Nunc a faucibus orci. Praesent\n        elementum ligula ut nulla iaculis, nec luctus elit faucibus. Nam\n        aliquam, mauris non imperdiet fringilla, augue purus tristique sapien,\n        sed facilisis justo massa hendrerit lacus. Phasellus interdum tristique\n        lacinia. Pellentesque vestibulum tincidunt fringilla. Quisque convallis\n        arcu purus, eget euismod nulla maximus ut. Proin vel purus ut risus\n        varius dictum. In feugiat consequat nunc at hendrerit. Vivamus in\n        placerat leo. Morbi diam ante, porttitor non mollis eu, eleifend eu\n        diam. Integer non dui ipsum. Nullam dictum tempus leo vitae cursus. Nunc\n        consequat ornare sagittis. Vestibulum at vehicula diam, quis consectetur\n        justo. Proin sed feugiat orci.\n      </Paragraph>\n    </Box>\n  );\n};\n","import { Box, Heading,Paragraph } from \"grommet\";\nimport React from \"react\";\n\nexport const Error = () => {\n  return (\n    <Box>\n      <Heading>Error</Heading>\n      <Paragraph fill>\n        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus\n        pretium finibus leo nec commodo. Vestibulum vestibulum eget lectus sit\n        amet rhoncus. Phasellus pretium nulla eget pellentesque fringilla. Nunc\n        turpis dolor, viverra a lectus nec, pellentesque commodo sapien. Proin\n        iaculis, arcu vitae aliquam eleifend, dolor tellus blandit urna, sit\n        amet luctus arcu nulla id elit. Nam nec lobortis orci. Duis nisi sapien,\n        dictum a tincidunt ut, luctus rhoncus lacus. Curabitur a lacus ante.\n        Praesent venenatis a arcu vel suscipit. Interdum et malesuada fames ac\n        ante ipsum primis in faucibus. Nullam nec felis et lectus faucibus\n        venenatis. Fusce quis bibendum nisi, sed condimentum turpis. Maecenas ut\n        congue lacus. Sed enim velit, finibus vel enim eget, lacinia consequat\n        neque. Suspendisse volutpat risus nibh, non scelerisque libero facilisis\n        sed.\n      </Paragraph>\n      <Paragraph fill>\n        Cras nibh sapien, consequat sed varius vitae, sagittis sed felis.\n        Pellentesque tincidunt justo lorem, sollicitudin varius quam malesuada\n        at. Duis eget sagittis ex, placerat aliquam nisi. Integer condimentum\n        eleifend leo, in sodales lectus sagittis consectetur. Etiam euismod, est\n        fringilla eleifend accumsan, enim ex auctor odio, et bibendum metus\n        tellus sed metus. Nulla ornare massa justo, ac feugiat velit efficitur\n        in. Sed consequat ultrices massa non iaculis. Aenean luctus, nulla eu\n        convallis porta, risus nunc fringilla nisl, vel sodales neque urna vitae\n        elit. Praesent dignissim aliquam suscipit. Fusce eu turpis nec magna\n        maximus dictum. Donec dapibus at magna sed suscipit. Aliquam malesuada,\n        lorem eget ultricies pellentesque, sapien sem ullamcorper ligula, non\n        ornare velit nulla ut eros.\n      </Paragraph>\n      <Paragraph fill>\n        Nulla in eros tincidunt, bibendum leo eu, lobortis justo. Donec et\n        tristique arcu. Duis nec semper turpis. In at lacinia nulla, et\n        imperdiet lectus. Donec sodales aliquet fringilla. Ut et mauris eros.\n        Fusce eget lacinia enim. Fusce posuere nec lacus at ullamcorper. Cras\n        imperdiet maximus consectetur.\n      </Paragraph>\n      <Paragraph fill>\n        Suspendisse in sapien varius, accumsan arcu sit amet, egestas quam. Ut\n        dapibus velit odio, a ultricies urna interdum sed. Maecenas in dapibus\n        sem, at euismod purus. Quisque semper nulla efficitur, sagittis sapien\n        quis, tincidunt felis. Fusce vel augue sed mauris maximus consectetur.\n        Fusce pellentesque in sem a dapibus. Vivamus pretium cursus tellus quis\n        commodo. In ultricies nisi quis viverra condimentum. Etiam id finibus\n        lacus, in tempus nunc. Sed sed nisl sem. Suspendisse ullamcorper id odio\n        eu volutpat.\n      </Paragraph>\n      <Paragraph fill>\n        Donec placerat neque a rhoncus molestie. Nunc a faucibus orci. Praesent\n        elementum ligula ut nulla iaculis, nec luctus elit faucibus. Nam\n        aliquam, mauris non imperdiet fringilla, augue purus tristique sapien,\n        sed facilisis justo massa hendrerit lacus. Phasellus interdum tristique\n        lacinia. Pellentesque vestibulum tincidunt fringilla. Quisque convallis\n        arcu purus, eget euismod nulla maximus ut. Proin vel purus ut risus\n        varius dictum. In feugiat consequat nunc at hendrerit. Vivamus in\n        placerat leo. Morbi diam ante, porttitor non mollis eu, eleifend eu\n        diam. Integer non dui ipsum. Nullam dictum tempus leo vitae cursus. Nunc\n        consequat ornare sagittis. Vestibulum at vehicula diam, quis consectetur\n        justo. Proin sed feugiat orci.\n      </Paragraph>\n    </Box>\n  );\n};\n","import { Box, ResponsiveContext, Text } from \"grommet\";\nimport React, { useContext } from \"react\";\nimport { colorTheme } from \"../../../components/colorTheme\";\n\nexport const CameraIndicator = ({\n  showBorder,\n  backgroundColor = \"yellow\",\n}: {\n  showBorder: boolean;\n  backgroundColor?: \"black\" | \"yellow\";\n}) => {\n  const size = useContext(ResponsiveContext) as\n    | \"small\"\n    | \"medium\"\n    | \"large\"\n    | \"xlarge\";\n\n  const margins =\n    size === \"small\" || size === \"medium\"\n      ? { right: \"16px\", top: \"16px\", bottom: \"12px\" }\n      : { right: \"13px\", top: \"12px\", bottom: \"12px\" };\n  const bottomBorderStyle = showBorder\n    ? { borderBottom: `4px solid ${colorTheme.yellowAlternative}` }\n    : {};\n  return (\n    <Box\n      fill=\"horizontal\"\n      background={backgroundColor}\n      flex={false}\n      style={bottomBorderStyle}\n    >\n      <Box direction=\"row\" justify=\"end\" margin={margins}>\n        <Box direction=\"row\" border={{ color: \"yellow\", size: \"3px\" }}>\n          <Box\n            background=\"redLight\"\n            pad={{ horizontal: \"17px\", vertical: \"7px\" }}\n          >\n            <Text size=\"small\" color=\"grayLight\">\n              Camera\n            </Text>\n          </Box>\n          <Box\n            background=\"charcoal\"\n            pad={{ horizontal: \"17px\", vertical: \"7px\" }}\n          >\n            <Text size=\"small\" color=\"grayLight\">\n              off\n            </Text>\n          </Box>\n        </Box>\n      </Box>\n    </Box>\n  );\n};\n","import { Box, Heading, ResponsiveContext, Stack } from \"grommet\";\nimport React, { PropsWithChildren, useContext } from \"react\";\n\nexport const PageFrame = ({\n  children,\n  frameColor,\n  textColor,\n  heading,\n}: PropsWithChildren<{\n  frameColor: string;\n  textColor: string;\n  heading: string;\n}>) => {\n  const style = {\n    outlineOffset: `-4px`,\n    outline: `4px ${frameColor} solid`,\n  };\n\n  const size = useContext(ResponsiveContext) as \"small\" | string;\n  const isSmall = size === \"small\";\n  return (\n    <Box className=\"frame\" style={style} flex={false}>\n      <HeadingBlock frameColor={frameColor}>\n        <Heading\n          level={1}\n          color={textColor}\n          margin=\"0\"\n          size={isSmall ? \"small\" : \"medium\"}\n        >\n          {heading}\n        </Heading>\n      </HeadingBlock>\n      {children}\n    </Box>\n  );\n};\n\nexport const CoverFrame = ({\n  children,\n  frameColor,\n  textColor,\n  heading,\n}: PropsWithChildren<{\n  frameColor: string;\n  textColor: string;\n  heading: string;\n}>) => {\n  const style = {\n    outlineOffset: `-4px`,\n    outline: `4px ${frameColor} solid`,\n  };\n\n  const size = useContext(ResponsiveContext) as \"small\" | string;\n  const isSmall = size === \"small\";\n  return (\n    <Box className=\"cover-frame\" style={style}>\n      <Stack fill anchor=\"top-left\">\n        <Box fill>{children}</Box>\n        <HeadingBlock frameColor={frameColor}>\n          <Heading\n            level={2}\n            color={textColor}\n            margin=\"0\"\n            size={isSmall ? \"small\" : \"medium\"}\n          >\n            {heading}\n          </Heading>\n        </HeadingBlock>\n      </Stack>\n    </Box>\n  );\n};\n\nconst HeadingBlock = ({\n  frameColor,\n  children,\n}: PropsWithChildren<{\n  frameColor: string;\n}>) => {\n  return (\n    <Box className=\"heading-block\" direction=\"row\">\n      <Box\n        background={frameColor}\n        pad={{ horizontal: \"20px\", vertical: \"12px\" }}\n      >\n        {children}\n      </Box>\n    </Box>\n  );\n};\n","import { Box, BoxProps, Grid, ResponsiveContext } from \"grommet\";\nimport React, { PropsWithChildren, useContext } from \"react\";\nimport { colorTheme } from \"../../../components/colorTheme\";\nimport { Cover1 } from \"../../covers/Cover1\";\nimport { CameraIndicator } from \"./CameraIndicator\";\nimport { CoverFrame } from \"./Frames\";\n\nexport const Cover = () => {\n  return (\n    <Box fill background=\"black\">\n      <CameraIndicator showBorder={false} backgroundColor=\"black\" />\n      <CoverContainer>\n        <CoverContent />\n      </CoverContainer>\n    </Box>\n  );\n};\n\nexport const CoverContainer = ({ children }: PropsWithChildren<{}>) => {\n  const size = useContext(ResponsiveContext) as\n    | \"small\"\n    | \"medium\"\n    | \"large\"\n    | \"xlarge\";\n\n  let props: BoxProps;\n  switch (size) {\n    case \"small\":\n      props = {\n        margin: { horizontal: \"16px\", top: \"16px\", bottom: \"16px\" },\n        gap: \"48px\",\n      };\n      break;\n    case \"medium\":\n      props = {\n        margin: { horizontal: \"64px\", top: \"16px\", bottom: \"64px\" },\n        gap: \"48px\",\n      };\n      break;\n    case \"large\":\n      props = {\n        margin: { left: \"64px\", top: \"20px\", bottom: \"20px\" },\n        width: { max: \"896px\" },\n      };\n      break;\n    case \"xlarge\":\n      props = {\n        margin: { left: \"112px\", top: \"36px\", bottom: \"20px\" },\n        width: { max: \"896px\" },\n      };\n      break;\n  }\n\n  return (\n    <Box className=\"cover container\" {...props}>\n      <Grid\n        responsive={false}\n        areas={[\n          { name: \"cover\", start: [0, 0], end: [0, 0] },\n          {\n            name: \"timeline\",\n            start: [0, 1],\n            end: [0, 1],\n          },\n        ]}\n        fill\n        columns={[\"full\"]}\n        rows={[\"flex\", \"auto\"]}\n        gap=\"15px\"\n      >\n        <Box gridArea=\"cover\">\n          <CoverFrame\n            textColor={colorTheme.black}\n            frameColor={colorTheme.yellow}\n            heading=\"Discriminator\"\n          >\n            {children}\n          </CoverFrame>\n        </Box>\n        <Box gridArea=\"timeline\" gap=\"8px\">\n          <Grid\n            fill\n            responsive={false}\n            columns={{ count: 4, size: \"auto\" }}\n            gap={\"4px\"}\n          >\n            <Box\n              background={{ color: \"yellowAlternative\", opacity: 0.8 }}\n              height=\"8px\"\n            ></Box>\n            <Box\n              background={{ color: \"yellowAlternative\", opacity: 0.8 }}\n              height=\"8px\"\n            ></Box>\n            <Box\n              background={{ color: \"yellowAlternative\", opacity: 0.8 }}\n              height=\"8px\"\n            ></Box>\n            <Box\n              background={{ color: \"yellowAlternative\", opacity: 0.8 }}\n              height=\"8px\"\n            ></Box>\n          </Grid>\n\n          <Box direction=\"row\" justify=\"start\" gap={\"20px\"} flex={false}>\n            <Box>Pause</Box>\n            <Box>Back</Box>\n          </Box>\n        </Box>\n      </Grid>\n    </Box>\n  );\n};\n\nconst CoverContent = () => {\n  const size = useContext(ResponsiveContext) as\n    | \"small\"\n    | \"medium\"\n    | \"large\"\n    | \"xlarge\";\n\n  const isSmall = size === \"small\";\n  const marginTop = isSmall ? \"4px\" : \"48px\";\n  const marginHorizontal = isSmall ? \"4px\" : \"64px\";\n\n  return (\n    <Box\n      gap={\"40px\"}\n      margin={{ horizontal: marginHorizontal, top: marginTop, bottom: \"4px\" }}\n    >\n      <Cover1 />\n    </Box>\n  );\n};\n","import { Box, Heading, ResponsiveContext } from \"grommet\";\nimport React, { CSSProperties, PropsWithChildren, useContext } from \"react\";\nimport { colorTheme } from \"../../../components/colorTheme\";\nimport { QueryButton } from \"../../../components/RoutedAnchor\";\n\nexport function LinksSmall() {\n  return (\n    <Box className=\"links\" gap=\"24px\">\n      <QueryButton\n        query={{ key: \"modal\", value: \"about\", operation: \"open\" }}\n        plain\n        label={\n          <LinkFrame\n            textColor={colorTheme.white}\n            frameColor={colorTheme.blue}\n            heading=\"About\"\n          >\n            <Box height={\"32px\"}></Box>\n          </LinkFrame>\n        }\n      />\n      <QueryButton\n        query={{ key: \"modal\", value: \"privacy\", operation: \"open\" }}\n        plain\n        label={\n          <LinkFrame\n            textColor={colorTheme.white}\n            frameColor={colorTheme.red}\n            heading=\"Privacy\"\n          >\n            <Box height={\"32px\"}></Box>\n          </LinkFrame>\n        }\n      />\n      <QueryButton\n        query={{ key: \"modal\", value: \"credits\", operation: \"open\" }}\n        plain\n        label={\n          <LinkFrame\n            textColor={colorTheme.white}\n            frameColor={colorTheme.green}\n            heading=\"Credits\"\n          >\n            <Box height={\"32px\"}></Box>\n          </LinkFrame>\n        }\n      />\n    </Box>\n  );\n}\n\nexport const Links = () => {\n  const size = useContext(ResponsiveContext);\n\n  switch (size) {\n    case \"small\":\n      return <LinksSmall />;\n    case \"medium\":\n      return <LinksFloating position=\"below\" />;\n    default:\n      return <LinksFloating position=\"bottom-right\" />;\n  }\n};\n\nexport const LinksFloating = ({\n  position,\n}: {\n  position: \"below\" | \"bottom-right\";\n}) => {\n  const style: CSSProperties =\n    position === \"below\"\n      ? { position: \"relative\", left: \"-454px\", top: \"0px\" }\n      : { position: \"relative\", left: \"-282px\", top: \"-100px\" };\n  return (\n    <Box className=\"links\" direction=\"row\" justify=\"end\" style={style}>\n      <div style={{ position: \"relative\" }}>\n        <div\n          style={{\n            position: \"absolute\",\n            top: \"64px\",\n          }}\n        >\n          <QueryButton\n            query={{ key: \"modal\", value: \"about\", operation: \"open\" }}\n            plain\n            fill\n            label={\n              <LinkFrame\n                textColor={colorTheme.white}\n                frameColor={colorTheme.blue}\n                heading=\"About\"\n              >\n                <Box height={\"64px\"} width={\"128px\"}></Box>\n              </LinkFrame>\n            }\n          />\n        </div>\n        <div\n          style={{\n            position: \"absolute\",\n            left: \"204px\",\n          }}\n        >\n          <QueryButton\n            query={{ key: \"modal\", value: \"privacy\", operation: \"open\" }}\n            href=\"/privacy\"\n            plain\n            fill\n            label={\n              <LinkFrame\n                textColor={colorTheme.white}\n                frameColor={colorTheme.red}\n                heading=\"Privacy\"\n              >\n                <Box height={\"96px\"} width={\"142px\"}></Box>\n              </LinkFrame>\n            }\n          />\n        </div>\n        <div\n          style={{\n            position: \"absolute\",\n            left: \"314px\",\n            top: \"84px\",\n          }}\n        >\n          <QueryButton\n            query={{ key: \"modal\", value: \"credits\", operation: \"open\" }}\n            href=\"/credits\"\n            plain\n            fill\n            label={\n              <LinkFrame\n                textColor={colorTheme.white}\n                frameColor={colorTheme.green}\n                heading=\"Credits\"\n              >\n                <Box height={\"60px\"} width={\"140px\"}></Box>\n              </LinkFrame>\n            }\n          />\n        </div>\n      </div>\n    </Box>\n  );\n};\n\nconst LinkFrame = ({\n  children,\n  frameColor,\n  textColor,\n  heading,\n}: PropsWithChildren<{\n  frameColor: string;\n  textColor: string;\n  heading: string;\n}>) => {\n  return (\n    <Box\n      className=\"link frame\"\n      style={{\n        outlineOffset: `-3px`,\n        outline: `3px ${frameColor} solid`,\n      }}\n      margin={{ bottom: \"8px\" }}\n    >\n      <LinksHeading\n        textColor={textColor}\n        frameColor={frameColor}\n        heading={heading}\n      />\n      {children}\n    </Box>\n  );\n};\n\nconst LinksHeading = ({\n  frameColor,\n  textColor,\n  heading,\n}: {\n  frameColor: string;\n  textColor: string;\n  heading: string;\n}) => {\n  return (\n    <Box className=\"link heading\" direction=\"row\">\n      <Box\n        background={frameColor}\n        pad={{ horizontal: \"16px\", vertical: \"8px\" }}\n      >\n        <Heading level={2} color={textColor} margin=\"0\" size=\"small\">\n          {heading}\n        </Heading>\n      </Box>\n    </Box>\n  );\n};\n","import { Box, BoxProps, ResponsiveContext, Text } from \"grommet\";\nimport React, { PropsWithChildren, useContext } from \"react\";\nimport { colorTheme } from \"../../../components/colorTheme\";\nimport { CustomRoutedButton } from \"./CustomButton\";\nimport { PageFrame } from \"./Frames\";\nimport { Links } from \"./Links\";\n\nexport const Home = () => {\n  return (\n    <HomeContainer>\n      <HomeContent />\n    </HomeContainer>\n  );\n};\n\nexport const HomeContainer = ({ children }: PropsWithChildren<{}>) => {\n  const size = useContext(ResponsiveContext) as\n    | \"small\"\n    | \"medium\"\n    | \"large\"\n    | \"xlarge\";\n\n  let props: BoxProps;\n  switch (size) {\n    case \"small\":\n      props = { margin: \"32px\", gap: \"48px\" };\n      break;\n    case \"medium\":\n      props = {\n        margin: { horizontal: \"64px\", top: \"96px\", bottom: \"64px\" },\n        gap: \"48px\",\n      };\n      break;\n    case \"large\":\n      props = {\n        margin: { left: \"64px\", top: \"96px\", bottom: \"20px\" },\n        width: { max: \"896px\" },\n      };\n      break;\n    case \"xlarge\":\n      props = {\n        margin: { left: \"112px\", top: \"112px\", bottom: \"20px\" },\n        width: { max: \"896px\" },\n      };\n      break;\n  }\n\n  return (\n    <Box className=\"home container\" {...props}>\n      <PageFrame\n        textColor={colorTheme.yellow}\n        frameColor={colorTheme.black}\n        heading=\"Discriminator\"\n      >\n        {children}\n      </PageFrame>\n      <Links />\n    </Box>\n  );\n};\n\nconst HomeContent = () => {\n  const size = useContext(ResponsiveContext) as\n    | \"small\"\n    | \"medium\"\n    | \"large\"\n    | \"xlarge\";\n\n  const isSmall = size === \"small\";\n  const marginTop = isSmall ? \"56px\" : \"48px\";\n  const marginHorizontal = isSmall ? \"32px\" : \"64px\";\n\n  return (\n    <Box\n      gap={\"40px\"}\n      margin={{ horizontal: marginHorizontal, top: marginTop, bottom: \"64px\" }}\n    >\n      <Text size={size === \"small\" ? \"small\" : \"medium\"}>\n        Egestas enim cursus pretium leo, egestas blandit egestas nunc magna.\n        Lectus euismod mauris faucibus massa nibh condimentum vitae nunc quis.\n        Lacus vitae amet aliquam id leo. Interdum vulputate eu et aliquet elit\n        morbi bibendum. Tellus euismod metus, id feugiat amet.\n      </Text>\n\n      <CustomRoutedButton color=\"blue\" textContent=\"Start\" href=\"/permissions\" />\n    </Box>\n  );\n};\n","import { Box, BoxProps, ResponsiveContext, Text } from \"grommet\";\nimport React, { PropsWithChildren, useContext, useState } from \"react\";\nimport { colorTheme } from \"../../../components/colorTheme\";\nimport { CameraIndicator } from \"./CameraIndicator\";\nimport { CustomRoutedButton } from \"./CustomButton\";\nimport { PageFrame } from \"./Frames\";\nimport { Links } from \"./Links\";\n\nexport const Permission = () => {\n  const [showBorder, setShowBorder] = useState(false);\n  return (\n    <Box fill>\n      <CameraIndicator showBorder={showBorder} />\n      <Box\n        overflow=\"auto\"\n        onScroll={(event) =>\n          setShowBorder((event.target as HTMLElement).scrollTop !== 0)\n        }\n        height=\"100%\"\n      >\n        <PermissionContainer>\n          <PermissionContent />\n        </PermissionContainer>\n      </Box>\n    </Box>\n  );\n};\n\nexport const PermissionContainer = ({ children }: PropsWithChildren<{}>) => {\n  const size = useContext(ResponsiveContext) as\n    | \"small\"\n    | \"medium\"\n    | \"large\"\n    | \"xlarge\";\n\n  let props: BoxProps;\n  switch (size) {\n    case \"small\":\n      props = {\n        margin: { horizontal: \"32px\", top: \"16px\", bottom: \"32px\" },\n        gap: \"48px\",\n      };\n      break;\n    case \"medium\":\n      props = {\n        margin: { horizontal: \"64px\", top: \"16px\", bottom: \"64px\" },\n        gap: \"48px\",\n      };\n      break;\n    case \"large\":\n      props = {\n        margin: { left: \"64px\", top: \"20px\", bottom: \"20px\" },\n        width: { max: \"896px\" },\n      };\n      break;\n    case \"xlarge\":\n      props = {\n        margin: { left: \"112px\", top: \"36px\", bottom: \"20px\" },\n        width: { max: \"896px\" },\n      };\n      break;\n  }\n\n  return (\n    <Box className=\"permission container\" {...props}>\n      <PageFrame\n        textColor={colorTheme.yellow}\n        frameColor={colorTheme.black}\n        heading=\"Discriminator\"\n      >\n        {children}\n      </PageFrame>\n      <Links />\n    </Box>\n  );\n};\n\nconst PermissionContent = () => {\n  const size = useContext(ResponsiveContext) as\n    | \"small\"\n    | \"medium\"\n    | \"large\"\n    | \"xlarge\";\n\n  const isSmall = size === \"small\";\n  const marginTop = isSmall ? \"56px\" : \"48px\";\n  const marginHorizontal = isSmall ? \"32px\" : \"64px\";\n\n  return (\n    <Box\n      gap={\"40px\"}\n      margin={{ horizontal: marginHorizontal, top: marginTop, bottom: \"64px\" }}\n    >\n      <Text size={size === \"small\" ? \"small\" : \"medium\"}>\n        To get out the best out of this experience, we recommend to enable your\n        webcam. We do not store any of your information (see our privacy\n        policy). If you choose to not enable your webcam you will see xyz.\n      </Text>\n\n      <CustomRoutedButton\n        color={\"red\"}\n        textContent={\n          <span>\n            Continue{\" \"}\n            <span style={{ textDecoration: \"underline\" }}>without</span> webcam\n          </span>\n        }\n        href=\"/cover\"\n      />\n      <CustomRoutedButton\n        color={\"green\"}\n        textContent={\n          <span>\n            Continue <span style={{ textDecoration: \"underline\" }}>with</span>{\" \"}\n            webcam\n          </span>\n        }\n        href=\"/cover\"\n      />\n    </Box>\n  );\n};\n","import { Box, Heading, Paragraph } from \"grommet\";\nimport React from \"react\";\n\nexport const HomeCoil = () => {\n  return (\n    <Box>\n      <Heading>Home for Coil Users</Heading>\n      <Paragraph fill>\n        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus\n        pretium finibus leo nec commodo. Vestibulum vestibulum eget lectus sit\n        amet rhoncus. Phasellus pretium nulla eget pellentesque fringilla. Nunc\n        turpis dolor, viverra a lectus nec, pellentesque commodo sapien. Proin\n        iaculis, arcu vitae aliquam eleifend, dolor tellus blandit urna, sit\n        amet luctus arcu nulla id elit. Nam nec lobortis orci. Duis nisi sapien,\n        dictum a tincidunt ut, luctus rhoncus lacus. Curabitur a lacus ante.\n        Praesent venenatis a arcu vel suscipit. Interdum et malesuada fames ac\n        ante ipsum primis in faucibus. Nullam nec felis et lectus faucibus\n        venenatis. Fusce quis bibendum nisi, sed condimentum turpis. Maecenas ut\n        congue lacus. Sed enim velit, finibus vel enim eget, lacinia consequat\n        neque. Suspendisse volutpat risus nibh, non scelerisque libero facilisis\n        sed.\n      </Paragraph>\n      <Paragraph fill>\n        Cras nibh sapien, consequat sed varius vitae, sagittis sed felis.\n        Pellentesque tincidunt justo lorem, sollicitudin varius quam malesuada\n        at. Duis eget sagittis ex, placerat aliquam nisi. Integer condimentum\n        eleifend leo, in sodales lectus sagittis consectetur. Etiam euismod, est\n        fringilla eleifend accumsan, enim ex auctor odio, et bibendum metus\n        tellus sed metus. Nulla ornare massa justo, ac feugiat velit efficitur\n        in. Sed consequat ultrices massa non iaculis. Aenean luctus, nulla eu\n        convallis porta, risus nunc fringilla nisl, vel sodales neque urna vitae\n        elit. Praesent dignissim aliquam suscipit. Fusce eu turpis nec magna\n        maximus dictum. Donec dapibus at magna sed suscipit. Aliquam malesuada,\n        lorem eget ultricies pellentesque, sapien sem ullamcorper ligula, non\n        ornare velit nulla ut eros.\n      </Paragraph>\n      <Paragraph fill>\n        Nulla in eros tincidunt, bibendum leo eu, lobortis justo. Donec et\n        tristique arcu. Duis nec semper turpis. In at lacinia nulla, et\n        imperdiet lectus. Donec sodales aliquet fringilla. Ut et mauris eros.\n        Fusce eget lacinia enim. Fusce posuere nec lacus at ullamcorper. Cras\n        imperdiet maximus consectetur.\n      </Paragraph>\n      <Paragraph fill>\n        Suspendisse in sapien varius, accumsan arcu sit amet, egestas quam. Ut\n        dapibus velit odio, a ultricies urna interdum sed. Maecenas in dapibus\n        sem, at euismod purus. Quisque semper nulla efficitur, sagittis sapien\n        quis, tincidunt felis. Fusce vel augue sed mauris maximus consectetur.\n        Fusce pellentesque in sem a dapibus. Vivamus pretium cursus tellus quis\n        commodo. In ultricies nisi quis viverra condimentum. Etiam id finibus\n        lacus, in tempus nunc. Sed sed nisl sem. Suspendisse ullamcorper id odio\n        eu volutpat.\n      </Paragraph>\n      <Paragraph fill>\n        Donec placerat neque a rhoncus molestie. Nunc a faucibus orci. Praesent\n        elementum ligula ut nulla iaculis, nec luctus elit faucibus. Nam\n        aliquam, mauris non imperdiet fringilla, augue purus tristique sapien,\n        sed facilisis justo massa hendrerit lacus. Phasellus interdum tristique\n        lacinia. Pellentesque vestibulum tincidunt fringilla. Quisque convallis\n        arcu purus, eget euismod nulla maximus ut. Proin vel purus ut risus\n        varius dictum. In feugiat consequat nunc at hendrerit. Vivamus in\n        placerat leo. Morbi diam ante, porttitor non mollis eu, eleifend eu\n        diam. Integer non dui ipsum. Nullam dictum tempus leo vitae cursus. Nunc\n        consequat ornare sagittis. Vestibulum at vehicula diam, quis consectetur\n        justo. Proin sed feugiat orci.\n      </Paragraph>\n    </Box>\n  );\n};\n","import React, { ReactElement } from \"react\";\nimport { HashRouter, Route, Switch } from \"react-router-dom\";\nimport { PageContainer } from \"./components/PageContainer\";\nimport { RouteChaptersAndCovers } from \"./pages/ChaptersAndCovers\";\nimport { EndPage } from \"./pages/plain/EndPage\";\nimport { Error } from \"./pages/plain/Error\";\nimport { Cover } from \"./pages/plain/home/Cover\";\nimport { Home } from \"./pages/plain/home/Home\";\nimport { Permission } from \"./pages/plain/home/Permission\";\nimport { HomeCoil } from \"./pages/plain/HomeCoil\";\nimport { PlainPageRoutes } from \"./Routes\";\n\nconst routeToComponent: { url: PlainPageRoutes; component: ReactElement }[] = [\n  { url: \"/\", component: <Home /> },\n  { url: \"/cover\", component: <Cover /> },\n  { url: \"/home\", component: <Home /> },\n  { url: \"/permissions\", component: <Permission /> },\n  { url: \"/coil\", component: <HomeCoil /> },\n  { url: \"/end\", component: <EndPage /> },\n  { url: \"/error\", component: <Error /> },\n];\n\nfunction App() {\n  return (\n    <HashRouter basename={\"/\"}>\n      <PageContainer>\n        <Switch>\n          {routeToComponent.map(({ url, component }) => (\n            <Route exact path={url} key={url}>\n              {component}\n            </Route>\n          ))}\n          <Route path={`/chapter`} component={RouteChaptersAndCovers} />\n          <Route>Missing Route</Route>\n        </Switch>\n      </PageContainer>\n    </HashRouter>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nimport * as WebFont from \"webfontloader\";\n\nWebFont.load({\n  custom: { families: [\"Roboto\"] },\n});\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}